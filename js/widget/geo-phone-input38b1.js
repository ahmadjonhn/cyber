jQuery(function($){JBZoo.widget('HyperPC.Geo.PhoneInput',{'dadataApiKey':''},{init:function($this){$this._subscribeGeoEvents($this);$this._defineUserLocation($this,$this.getOption('dadataApiKey'));$('body').on('input','.tm-mask-phone input[type="tel"]',function(e){if($(this).val().length<4){$(this).val("+7 (");}});$('body').on('click','.tm-mask-phone',function(e){if($(e.target).is('.tm-mask-phone')){var input=$(e.target).find('input[type="tel"]'),val=input.val();input.focus().val('').val(val);}});$('body').on('keydown','.tm-mask-phone input',function(e){switch(e.keyCode){case 37:case 39:if(this.selectionEnd<=4){return false;}break;}});},_onLocationDefined:function(){this._updateMask(this);},_updateMask:function($this){var userLocation=$this._getUserLocation(),$input=$this.el;maskClass='tm-mask-phone';if($this.el.hasClass('uk-form-large')){maskClass+=' tm-mask-phone-large';}if($this.el.siblings('.uk-form-icon:not(.uk-form-icon-flip)').length>0){maskClass+=' tm-mask-phone-icon';}if($input.attr('aria-invalid')!=='false'){if(userLocation.country==='Россия'){$input.val('+7 (').closest('.tm-label-infield').removeClass('isEmpty');$input.parent().addClass(maskClass);$input.mask('+7 (000) 000-00-00');if($input.closest('form').attr('novalidate')==='novalidate'){$input.rules('add','mobile');var errors=$input.attr('aria-describedby');if(errors){$input.siblings('#'+errors).hide();}}}else{$input.val('').closest('.tm-label-infield').addClass('isEmpty');$input.closest('.tm-mask-phone').removeClass(maskClass);$input.mask('+000000000000000');if($input.closest('form').attr('novalidate')==='novalidate'){$input.rules('remove','mobile');var errors=$input.attr('aria-describedby');if(errors){$input.siblings('#'+errors).hide();}}}$input.removeClass('uk-form-danger uk-form-success');}},'click {element}':function(e,$this){val=$(this).val();$(this).focus().val('').val(val);}});});