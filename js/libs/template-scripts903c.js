!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(e){"use strict";function t(e){return function(t){if(0===t.length)return!1;if(1===t.length)return!0;var i=e(t[0].value);return 0===t.filter(function(t){return 0!==e(t.value).indexOf(i)}).length}}function i(e,t){return function(i,n){var s,r=[];return t(n)&&(s=T.splitTokens(T.split(i,e)),y.each(n,function(t,n){var a=t.value;if(T.stringEncloses(i,a))return!1;var o=T.splitTokens(T.split(a,e));0===y.minus(s,o).length&&r.push(n)})),1===r.length?r[0]:-1}}function n(e,t){var i=e.data&&e.data[t];return i&&new RegExp("^"+T.escapeRegExChars(i)+"(["+_+"]|$)","i").test(e.value)}function s(e,t){var i=/<strong>/;return i.test(t)&&!i.test(e)?t:e}function r(e,t,i,n,r){var a=this;return s(a.highlightMatches(e,i,n,r),a.highlightMatches(t,i,n,r))}function a(e){this.urlSuffix=e.toLowerCase(),this.noSuggestionsHint="Неизвестное значение",this.matchers=[B.matchByNormalizedQuery(),B.matchByWords()]}function o(t,i){var n=this;n.element=t,n.el=e(t),n.suggestions=[],n.badQueries=[],n.selectedIndex=-1,n.currentValue=n.element.value,n.intervalId=0,n.cachedResponse={},n.enrichmentCache={},n.currentRequest=null,n.inputPhase=e.Deferred(),n.fetchPhase=e.Deferred(),n.enrichPhase=e.Deferred(),n.onChangeTimeout=null,n.triggering={},n.$wrapper=null,n.options=e.extend({},O,i),n.classes=S,n.disabled=!1,n.selection=null,n.$viewport=e(window),n.$body=e(document.body),n.type=null,n.status={},n.setupElement(),n.initializer=e.Deferred(),n.el.is(":visible")?n.initializer.resolve():n.deferInitialization(),n.initializer.done(e.proxy(n.initialize,n))}function l(){P.each(Y,function(e){e.abort()}),Y={}}function u(){G=null,O.geoLocation=J}function c(t){return e.map(t,function(e){var t=P.escapeHtml(e.text);return t&&e.matched&&(t="<strong>"+t+"</strong>"),t}).join("")}function d(t,i){var n=t.split(", ");return 1===n.length?t:e.map(n,function(e){return'<span class="'+i+'">'+e+"</span>"}).join(", ")}function h(t,i){var n=!1;return e.each(t,function(e,t){if(n=t.value==i.value&&t!=i)return!1}),n}function f(e,t){var i=t.selection,n=i&&i.data&&t.bounds;return n&&y.each(t.bounds.all,function(t,s){return n=i.data[t]===e.data[t]}),n}function p(e){var t=e.replace(/^(\d{2})(\d*?)(0+)$/g,"$1$2"),i=t.length,n=-1;return i<=2?n=2:i>2&&i<=5?n=5:i>5&&i<=8?n=8:i>8&&i<=11?n=11:i>11&&i<=15?n=15:i>15&&(n=19),T.padEnd(t,n,"0")}function g(e){this.plan=e.status.plan,this.isMobile=e.isMobile;var t=e.getContainer();this.element=ge.selectByClass(S.promo,t)}function m(){new g(this).show()}e=e&&"default"in e?e["default"]:e;var v={isArray:function(e){return Array.isArray(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){return 0===Object.keys(e).length&&e.constructor===Object},isPlainObject:function(e){return!(void 0===e||"object"!=typeof e||null===e||e.nodeType||e===e.window||e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))}},y={compact:function(e){return e.filter(function(e){return!!e})},each:function(e,t){return Array.isArray(e)?void e.some(function(e,i){return!1===t(e,i)}):void Object.keys(e).some(function(i){var n=e[i];return!1===t(n,i)})},intersect:function(e,t){var i=[];return Array.isArray(e)&&Array.isArray(t)?e.filter(function(e){return-1!==t.indexOf(e)}):i},minus:function(e,t){return t&&0!==t.length?e.filter(function(e){return-1===t.indexOf(e)}):e},makeArray:function(e){return v.isArray(e)?Array.prototype.slice.call(e):[e]},minusWithPartialMatching:function(e,t){return t&&0!==t.length?e.filter(function(e){return!t.some(function(t){return 0===t.indexOf(e)})}):e},slice:function(e,t){return Array.prototype.slice.call(e,t)}},b={delay:function(e,t){return setTimeout(e,t||0)}},w={areSame:function me(e,t){var i=!0;return typeof e==typeof t&&("object"==typeof e&&null!=e&&null!=t?(y.each(e,function(e,n){return i=me(e,t[n])}),i):e===t)},assign:function(e,t){if("function"==typeof Object.assign)return Object.assign.apply(null,arguments);if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),n=1;n<arguments.length;n++){var s=arguments[n];if(null!=s)for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}return i},clone:function(e){return JSON.parse(JSON.stringify(e))},compact:function(e){var t=w.clone(e);return y.each(t,function(e,i){null!==e&&void 0!==e&&""!==e||delete t[i]}),t},fieldsAreNotEmpty:function(e,t){if(!v.isPlainObject(e))return!1;var i=!0;return y.each(t,function(t,n){return i=!!e[t]}),i},getDeepValue:function ve(e,t){var i=t.split("."),n=i.shift();return e&&(i.length?ve(e[n],i.join(".")):e[n])},indexObjectsById:function(e,t,i){var n={};return y.each(e,function(e,s){var r=e[t],a={};i&&(a[i]=s),n[r]=w.assign(a,e)}),n}},x={ENTER:13,ESC:27,TAB:9,SPACE:32,UP:38,DOWN:40},S={hint:"suggestions-hint",mobile:"suggestions-mobile",nowrap:"suggestions-nowrap",promo:"suggestions-promo",promo_desktop:"suggestions-promo-desktop",selected:"suggestions-selected",suggestion:"suggestions-suggestion",subtext:"suggestions-subtext",subtext_inline:"suggestions-subtext suggestions-subtext_inline",subtext_delimiter:"suggestions-subtext-delimiter",subtext_label:"suggestions-subtext suggestions-subtext_label",removeConstraint:"suggestions-remove",value:"suggestions-value"},C=".suggestions",_="\\s\"'~\\*\\.,:\\|\\[\\]\\(\\)\\{\\}<>№",k=new RegExp("["+_+"]+","g"),E=new RegExp("[\\-\\+\\\\\\?!@#$%^&]+","g"),T={escapeHtml:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e&&y.each(t,function(t,i){e=e.replace(new RegExp(i,"g"),t)}),e},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},formatToken:function(e){return e&&e.toLowerCase().replace(/[ёЁ]/g,"е")},getWordExtractorRegExp:function(){return new RegExp("([^"+_+"]*)(["+_+"]*)","g")},normalize:function(e,t){return T.split(e,t).join(" ")},padEnd:function(e,t,i){return String.prototype.padEnd?e.padEnd(t,i):(t>>=0,i=String(void 0!==i?i:" "),e.length>t?String(e):(t-=e.length,t>i.length&&(i+=i.repeat(t/i.length)),String(e)+i.slice(0,t)))},split:function(e,t){e=e.toLowerCase(),e=e.replace("ё","е").replace(/(\d+)([а-я]{2,})/g,"$1 $2").replace(/([а-я]+)(\d+)/g,"$1 $2");var i=y.compact(e.split(k)),n=i.pop(),s=y.minus(i,t);return s.push(n),s},splitTokens:function(e){var t=[];return y.each(e,function(e,i){var n=e.split(E);t=t.concat(y.compact(n))}),t},stringEncloses:function(e,t){return e.length>t.length&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},tokenize:function(e,t){var i=y.compact(T.formatToken(e).split(k)),n=y.minus(i,t),s=y.minus(i,n);return i=T.withSubTokens(n.concat(s))},withSubTokens:function(e){var t=[];return y.each(e,function(e,i){var n=e.split(E);t.push(e),n.length>1&&(t=t.concat(y.compact(n)))}),t}},V={Deferred:function(){return e.Deferred()},ajax:function(t){return e.ajax(t)},extend:function(){return e.extend.apply(null,arguments)},isJqObject:function(t){return t instanceof e},param:function(t){return e.param(t)},proxy:function(t,i){return e.proxy(t,i)},select:function(t){return e(t)},supportsCors:function(){return e.support.cors}},L={getDefaultType:function(){return V.supportsCors()?"POST":"GET"},getDefaultContentType:function(){return V.supportsCors()?"application/json":"application/x-www-form-urlencoded"},fixURLProtocol:function(e){return V.supportsCors()?e:e.replace(/^https?:/,location.protocol)},addUrlParams:function(e,t){return e+(/\?/.test(e)?"&":"?")+V.param(t)},serialize:function(e){return V.supportsCors()?JSON.stringify(e,function(e,t){return null===t?void 0:t}):(e=w.compact(e),V.param(e,!0))}},R=function(){var e=0;return function(t){return(t||"")+ ++e}}(),P={escapeRegExChars:T.escapeRegExChars,escapeHtml:T.escapeHtml,formatToken:T.formatToken,normalize:T.normalize,reWordExtractor:T.getWordExtractorRegExp,stringEncloses:T.stringEncloses,addUrlParams:L.addUrlParams,getDefaultContentType:L.getDefaultContentType,getDefaultType:L.getDefaultType,fixURLProtocol:L.fixURLProtocol,serialize:L.serialize,arrayMinus:y.minus,arrayMinusWithPartialMatching:y.minusWithPartialMatching,arraysIntersection:y.intersect,compact:y.compact,each:y.each,makeArray:y.makeArray,slice:y.slice,delay:b.delay,areSame:w.areSame,compactObject:w.compact,getDeepValue:w.getDeepValue,fieldsNotEmpty:w.fieldsAreNotEmpty,indexBy:w.indexObjectsById,isArray:v.isArray,isEmptyObject:v.isEmptyObject,isFunction:v.isFunction,isPlainObject:v.isPlainObject,uniqueId:R},O={autoSelectFirst:!1,serviceUrl:"https://suggestions.dadata.ru/suggestions/api/4_1/rs",url:null,onSearchStart:e.noop,onSearchComplete:e.noop,onSearchError:e.noop,onSuggestionsFetch:null,onSelect:null,onSelectNothing:null,onInvalidateSelection:null,minChars:1,deferRequestBy:100,enrichmentEnabled:!0,params:{},paramName:"query",timeout:3e3,formatResult:null,formatSelected:null,noCache:!1,containerClass:"suggestions-suggestions",tabDisabled:!1,triggerSelectOnSpace:!1,triggerSelectOnEnter:!0,triggerSelectOnBlur:!0,preventBadQueries:!1,hint:"Выберите вариант или продолжите ввод",noSuggestionsHint:null,type:null,requestMode:"suggest",count:5,$helpers:null,headers:null,scrollOnFocus:!0,mobileWidth:980,initializeInterval:100},I=t(function(e){return e}),j=t(function(e){return e.replace(/, (?:д|вл|двлд|к) .+$/,"")}),B={matchByNormalizedQuery:function(e){return function(t,i){var n=T.normalize(t,e),s=[];return y.each(i,function(i,r){var a=i.value.toLowerCase();return!T.stringEncloses(t,a)&&!(a.indexOf(n)>0)&&void(n===T.normalize(a,e)&&s.push(r))}),1===s.length?s[0]:-1}},matchByWords:function(e){return i(e,I)},matchByWordsAddress:function(e){return i(e,j)},matchByFields:function(e){return function(t,i){var n=T.splitTokens(T.split(t)),s=[];return 1===i.length&&(e&&y.each(e,function(e,t){var n=w.getDeepValue(i[0],t),r=n&&T.splitTokens(T.split(n,e));r&&r.length&&(s=s.concat(r))}),0===y.minusWithPartialMatching(n,s).length)?0:-1}}},z=["ао","аобл","дом","респ","а/я","аал","автодорога","аллея","арбан","аул","б-р","берег","бугор","вал","вл","волость","въезд","высел","г","городок","гск","д","двлд","днп","дор","дп","ж/д_будка","ж/д_казарм","ж/д_оп","ж/д_платф","ж/д_пост","ж/д_рзд","ж/д_ст","жилзона","жилрайон","жт","заезд","заимка","зона","к","казарма","канал","кв","кв-л","км","кольцо","комн","кордон","коса","кп","край","линия","лпх","м","массив","местность","мкр","мост","н/п","наб","нп","обл","округ","остров","оф","п","п/о","п/р","п/ст","парк","пгт","пер","переезд","пл","пл-ка","платф","погост","полустанок","починок","пр-кт","проезд","промзона","просек","просека","проселок","проток","протока","проулок","р-н","рзд","россия","рп","ряды","с","с/а","с/мо","с/о","с/п","с/с","сад","сквер","сл","снт","спуск","ст","ст-ца","стр","тер","тракт","туп","у","ул","уч-к","ф/х","ферма","х","ш","бульвар","владение","выселки","гаражно-строительный","город","деревня","домовладение","дорога","квартал","километр","комната","корпус","литер","леспромхоз","местечко","микрорайон","набережная","область","переулок","платформа","площадка","площадь","поселение","поселок","проспект","разъезд","район","республика","село","сельсовет","слобода","сооружение","станица","станция","строение","территория","тупик","улица","улус","участок","хутор","шоссе"],q=[{id:"kladr_id",fields:["kladr_id"],forBounds:!1,forLocations:!0},{id:"postal_code",fields:["postal_code"],forBounds:!1,forLocations:!0},{id:"country",fields:["country"],forBounds:!1,forLocations:!0},{id:"region_fias_id",fields:["region_fias_id"],forBounds:!1,forLocations:!0},{id:"region_type_full",fields:["region_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:2,zeros:11},fiasType:"region_fias_id"},{id:"region",fields:["region","region_type","region_type_full","region_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:2,zeros:11},fiasType:"region_fias_id"},{id:"area_fias_id",fields:["area_fias_id"],forBounds:!1,forLocations:!0},{id:"area_type_full",fields:["area_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:5,zeros:8},fiasType:"area_fias_id"},{id:"area",fields:["area","area_type","area_type_full","area_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:5,zeros:8},fiasType:"area_fias_id"},{id:"city_fias_id",fields:["city_fias_id"],forBounds:!1,forLocations:!0},{id:"city_type_full",fields:["city_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:8,zeros:5},fiasType:"city_fias_id"},{id:"city",fields:["city","city_type","city_type_full","city_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:8,zeros:5},fiasType:"city_fias_id"},{id:"city_district_fias_id",fields:["city_district_fias_id"],forBounds:!1,forLocations:!0},{id:"city_district_type_full",fields:["city_district_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"city_district_fias_id"},{id:"city_district",fields:["city_district","city_district_type","city_district_type_full","city_district_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"city_district_fias_id"},{id:"settlement_fias_id",fields:["settlement_fias_id"],forBounds:!1,forLocations:!0},{id:"settlement_type_full",fields:["settlement_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"settlement_fias_id"},{id:"settlement",fields:["settlement","settlement_type","settlement_type_full","settlement_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"settlement_fias_id"},{id:"street_fias_id",fields:["street_fias_id"],forBounds:!1,forLocations:!0},{id:"street_type_full",fields:["street_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:15,zeros:2},fiasType:"street_fias_id"},{id:"street",fields:["street","street_type","street_type_full","street_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:15,zeros:2},fiasType:"street_fias_id"},{id:"house",fields:["house","house_type","house_type_full","block","block_type"],forBounds:!0,forLocations:!1,kladrFormat:{digits:19}}],A={urlSuffix:"address",noSuggestionsHint:"Неизвестный адрес",matchers:[B.matchByNormalizedQuery(z),B.matchByWordsAddress(z)],dataComponents:q,dataComponentsById:w.indexObjectsById(q,"id","index"),unformattableTokens:z,enrichmentEnabled:!0,enrichmentMethod:"suggest",enrichmentParams:{count:1,locations:null,locations_boost:null,from_bound:null,to_bound:null},getEnrichmentQuery:function(e){return e.unrestricted_value},geoEnabled:!0,isDataComplete:function(e){var t=[this.bounds.to||"flat"],i=e.data;return!v.isPlainObject(i)||w.fieldsAreNotEmpty(i,t)},composeValue:function(e,t){var i=e.region_with_type||y.compact([e.region,e.region_type]).join(" ")||e.region_type_full,n=e.area_with_type||y.compact([e.area_type,e.area]).join(" ")||e.area_type_full,s=e.city_with_type||y.compact([e.city_type,e.city]).join(" ")||e.city_type_full,r=e.settlement_with_type||y.compact([e.settlement_type,e.settlement]).join(" ")||e.settlement_type_full,a=e.city_district_with_type||y.compact([e.city_district_type,e.city_district]).join(" ")||e.city_district_type_full,o=e.street_with_type||y.compact([e.street_type,e.street]).join(" ")||e.street_type_full,l=y.compact([e.house_type,e.house,e.block_type,e.block]).join(" "),u=y.compact([e.flat_type,e.flat]).join(" "),c=e.postal_box&&"а/я "+e.postal_box;return i===s&&(i=""),t&&t.saveCityDistrict||(t&&t.excludeCityDistrict?a="":a&&!e.city_district_fias_id&&(a="")),y.compact([i,n,s,a,r,o,l,u,c]).join(", ")},formatResult:function(){var e=[],t=!1;return q.forEach(function(i){t&&e.push(i.id),"city_district"===i.id&&(t=!0)}),function(t,i,n,s){var r,a,o,l=this,u=n.data&&n.data.city_district_with_type,c=s&&s.unformattableTokens,d=n.data&&n.data.history_values;return d&&d.length>0&&(r=T.tokenize(i,c),a=this.type.findUnusedTokens(r,t),(o=this.type.getFormattedHistoryValues(a,d))&&(t+=o)),t=l.highlightMatches(t,i,n,s),t=l.wrapFormattedValue(t,n),u&&(!l.bounds.own.length||l.bounds.own.indexOf("street")>=0)&&!v.isEmptyObject(l.copyDataComponents(n.data,e))&&(t+='<div class="'+l.classes.subtext+'">'+l.highlightMatches(u,i,n)+"</div>"),t}}(),findUnusedTokens:function(e,t){return e.filter(function(e){return-1===t.indexOf(e)})},getFormattedHistoryValues:function(e,t){var i=[],n="";return t.forEach(function(t){y.each(e,function(e){if(t.toLowerCase().indexOf(e)>=0)return i.push(t),!1})}),i.length>0&&(n=" (бывш. "+i.join(", ")+")"),n},getSuggestionValue:function(e,t){var i=null;return t.hasSameValues?i=e.options.restrict_value?this.getValueWithinConstraints(e,t.suggestion):e.bounds.own.length?this.getValueWithinBounds(e,t.suggestion):t.suggestion.unrestricted_value:t.hasBeenEnriched&&e.options.restrict_value&&(i=this.getValueWithinConstraints(e,t.suggestion,{excludeCityDistrict:!0})),i},getValueWithinConstraints:function(e,t,i){return this.composeValue(e.getUnrestrictedData(t.data),i)},getValueWithinBounds:function(e,t,i){var n=e.copyDataComponents(t.data,e.bounds.own.concat(["city_district_fias_id"]));return this.composeValue(n,i)}},F={urlSuffix:"fio",noSuggestionsHint:!1,matchers:[B.matchByNormalizedQuery(),B.matchByWords()],fieldNames:{surname:"фамилия",name:"имя",patronymic:"отчество"},isDataComplete:function(e){var t,i=this,s=i.options.params,r=e.data;return v.isFunction(s)&&(s=s.call(i.element,e.value)),s&&s.parts?t=s.parts.map(function(e){return e.toLowerCase()}):(t=["surname","name"],n(e,"surname")&&t.push("patronymic")),w.fieldsAreNotEmpty(r,t)},composeValue:function(e){return y.compact([e.surname,e.name,e.patronymic]).join(" ")}},D={LEGAL:[2,2,5,1],INDIVIDUAL:[2,2,6,2]},N={urlSuffix:"party",noSuggestionsHint:"Неизвестная организация",matchers:[B.matchByFields({value:null,"data.address.value":z,"data.inn":null,"data.ogrn":null})],dataComponents:q,enrichmentEnabled:!0,enrichmentMethod:"findById",enrichmentParams:{count:1,locations_boost:null},getEnrichmentQuery:function(e){return e.data.hid},geoEnabled:!0,formatResult:function(e,t,i,n){var a=this,o=a.type.formatResultInn.call(a,i,t),l=a.highlightMatches(w.getDeepValue(i.data,"ogrn"),t,i),u=s(o,l),c=a.highlightMatches(w.getDeepValue(i.data,"management.name"),t,i),d=w.getDeepValue(i.data,"address.value")||"";return a.isMobile&&((n||(n={})).maxLength=50),e=r.call(a,e,w.getDeepValue(i.data,"name.latin"),t,i,n),e=a.wrapFormattedValue(e,i),d&&(d=d.replace(/^(\d{6}?\s+|Россия,\s+)/i,""),d=a.isMobile?d.replace(new RegExp("^([^"+_+"]+["+_+"]+[^"+_+"]+).*"),"$1"):a.highlightMatches(d,t,i,{unformattableTokens:z})),(u||d||c)&&(e+='<div class="'+a.classes.subtext+'"><span class="'+a.classes.subtext_inline+'">'+(u||"")+"</span>"+(s(d,c)||"")+"</div>"),e},formatResultInn:function(e,t){var i,n,s=this,r=e.data&&e.data.inn,a=D[e.data&&e.data.type],o=/\d/;if(r)return n=s.highlightMatches(r,t,e),a&&(n=n.split(""),i=a.map(function(e){for(var t,i="";e&&(t=n.shift());)i+=t,o.test(t)&&e--;return i}),n=i.join('<span class="'+s.classes.subtext_delimiter+'"></span>')+n.join("")),n}},M={urlSuffix:"email",noSuggestionsHint:!1,matchers:[B.matchByNormalizedQuery()],isQueryRequestable:function(e){return this.options.suggest_local||e.indexOf("@")>=0}},$={urlSuffix:"bank",noSuggestionsHint:"Неизвестный банк",matchers:[B.matchByFields({value:null,"data.bic":null,"data.swift":null})],dataComponents:q,geoEnabled:!0,formatResult:function(e,t,i,n){var s=this,r=s.highlightMatches(w.getDeepValue(i.data,"bic"),t,i),a=w.getDeepValue(i.data,"address.value")||"";return e=s.highlightMatches(e,t,i,n),e=s.wrapFormattedValue(e,i),a&&(a=a.replace(/^\d{6}( РОССИЯ)?, /i,""),a=s.isMobile?a.replace(new RegExp("^([^"+_+"]+["+_+"]+[^"+_+"]+).*"),"$1"):s.highlightMatches(a,t,i,{unformattableTokens:z})),(r||a)&&(e+='<div class="'+s.classes.subtext+'"><span class="'+s.classes.subtext_inline+'">'+r+"</span>"+a+"</div>"),e},formatSelected:function(e){return w.getDeepValue(e,"data.name.payment")||null}},U={NAME:F,ADDRESS:A,PARTY:N,EMAIL:M,BANK:$};U.get=function(e){return U.hasOwnProperty(e)?U[e]:new a(e)},V.extend(O,{suggest_local:!0});var H={chains:{},on:function(e,t){return this.get(e).push(t),this},get:function(e){var t=this.chains;return t[e]||(t[e]=[])}},W={suggest:{defaultParams:{type:P.getDefaultType(),dataType:"json",contentType:P.getDefaultContentType()},addTypeInUrl:!0},detectAddressByIp:{defaultParams:{type:"GET",dataType:"json"},addTypeInUrl:!1},status:{defaultParams:{type:"GET",dataType:"json"},addTypeInUrl:!0},findById:{defaultParams:{type:P.getDefaultType(),dataType:"json",contentType:P.getDefaultContentType()},addTypeInUrl:!0}},Q={suggest:{method:"suggest",userSelect:!0,updateValue:!0,enrichmentEnabled:!0},findById:{method:"findById",userSelect:!1,updateValue:!1,enrichmentEnabled:!1}};o.prototype={initialize:function(){var e=this;e.uniqueId=P.uniqueId("i"),e.createWrapper(),e.notify("initialize"),e.bindWindowEvents(),e.setOptions(),e.fixPosition()},deferInitialization:function(){var e,t=this,i="mouseover focus keydown",n=function(){t.initializer.resolve(),t.enable()};t.initializer.always(function(){t.el.off(i,n),clearInterval(e)}),t.disabled=!0,t.el.on(i,n),e=setInterval(function(){t.el.is(":visible")&&n()},t.options.initializeInterval)},isInitialized:function(){return"resolved"===this.initializer.state()},dispose:function(){var e=this;e.initializer.reject(),e.notify("dispose"),e.el.removeData("suggestions").removeClass("suggestions-input"),e.unbindWindowEvents(),e.removeWrapper(),e.el.trigger("suggestions-dispose")},notify:function(t){var i=this,n=P.slice(arguments,1);return e.map(H.get(t),function(e){return e.apply(i,n)})},createWrapper:function(){var t=this;t.$wrapper=e('<div class="suggestions-wrapper"/>'),t.el.after(t.$wrapper),t.$wrapper.on("mousedown"+C,e.proxy(t.onMousedown,t))},removeWrapper:function(){var t=this;t.$wrapper&&t.$wrapper.remove(),e(t.options.$helpers).off(C)},onMousedown:function(t){var i=this;t.preventDefault(),i.cancelBlur=!0,P.delay(function(){delete i.cancelBlur}),0==e(t.target).closest(".ui-menu-item").length&&P.delay(function(){e(document).one("mousedown",function(t){var n=i.el.add(i.$wrapper).add(i.options.$helpers);i.options.floating&&(n=n.add(i.$container)),n=n.filter(function(){return this===t.target||e.contains(this,t.target)}),n.length||i.hide()})})},bindWindowEvents:function(){var t=this,i=e.proxy(t.fixPosition,t);t.$viewport.on("resize"+C+t.uniqueId,i).on("scroll"+C+t.uniqueId,i)},unbindWindowEvents:function(){this.$viewport.off("resize"+C+this.uniqueId).off("scroll"+C+this.uniqueId)},scrollToTop:function(){var t=this,i=t.options.scrollOnFocus;!0===i&&(i=t.el),i instanceof e&&i.length>0&&e("body,html").animate({scrollTop:i.offset().top},"fast")},setOptions:function(t){var i=this;e.extend(i.options,t),i.type=U.get(i.options.type),e.each({requestMode:Q},function(t,n){if(i[t]=n[i.options[t]],!i[t])throw i.disable(),"`"+t+"` option is incorrect! Must be one of: "+e.map(n,function(e,t){return'"'+t+'"'}).join(", ")}),e(i.options.$helpers).off(C).on("mousedown"+C,e.proxy(i.onMousedown,i)),i.isInitialized()&&i.notify("setOptions")},fixPosition:function(t){var i,n,s=this,r={};s.isMobile=s.$viewport.width()<=s.options.mobileWidth,s.isInitialized()&&(!t||"scroll"!=t.type||s.options.floating||s.isMobile)&&(s.$container.appendTo(s.options.floating?s.$body:s.$wrapper),s.notify("resetPosition"),s.el.css("paddingLeft",""),s.el.css("paddingRight",""),r.paddingLeft=parseFloat(s.el.css("paddingLeft")),r.paddingRight=parseFloat(s.el.css("paddingRight")),e.extend(r,s.el.offset()),r.borderTop="none"==s.el.css("border-top-style")?0:parseFloat(s.el.css("border-top-width")),r.borderLeft="none"==s.el.css("border-left-style")?0:parseFloat(s.el.css("border-left-width")),r.innerHeight=s.el.innerHeight(),r.innerWidth=s.el.innerWidth(),r.outerHeight=s.el.outerHeight(),r.componentsLeft=0,r.componentsRight=0,i=s.$wrapper.offset(),n={top:r.top-i.top,left:r.left-i.left},s.notify("fixPosition",n,r),r.componentsLeft>r.paddingLeft&&s.el.css("paddingLeft",r.componentsLeft+"px"),r.componentsRight>r.paddingRight&&s.el.css("paddingRight",r.componentsRight+"px"))},clearCache:function(){this.cachedResponse={},this.enrichmentCache={},this.badQueries=[]},clear:function(){var e=this,t=e.selection;e.isInitialized()&&(e.clearCache(),e.currentValue="",e.selection=null,e.hide(),e.suggestions=[],e.el.val(""),e.el.trigger("suggestions-clear"),e.notify("clear"),e.trigger("InvalidateSelection",t))},disable:function(){var e=this;e.disabled=!0,e.abortRequest(),e.visible&&e.hide()},enable:function(){this.disabled=!1},isUnavailable:function(){return this.disabled},update:function(){var e=this,t=e.el.val();e.isInitialized()&&(e.currentValue=t,e.isQueryRequestable(t)?e.updateSuggestions(t):e.hide())},setSuggestion:function(t){var i,n,s=this;e.isPlainObject(t)&&e.isPlainObject(t.data)&&(t=e.extend(!0,{},t),s.isUnavailable()&&s.initializer&&"pending"===s.initializer.state()&&(s.initializer.resolve(),s.enable()),s.bounds.own.length&&(s.checkValueBounds(t),i=s.copyDataComponents(t.data,s.bounds.all),t.data.kladr_id&&(i.kladr_id=s.getBoundedKladrId(t.data.kladr_id,s.bounds.all)),t.data=i),s.selection=t,s.suggestions=[t],n=s.getSuggestionValue(t)||"",s.currentValue=n,s.el.val(n),s.abortRequest(),s.el.trigger("suggestions-set"))},fixData:function(){var t=this,i=t.extendedCurrentValue(),n=t.el.val(),s=e.Deferred();s.done(function(e){t.selectSuggestion(e,0,n,{hasBeenEnriched:!0}),t.el.trigger("suggestions-fixdata",e)}).fail(function(){t.selection=null,t.el.trigger("suggestions-fixdata")}),t.isQueryRequestable(i)?(t.currentValue=i,t.getSuggestions(i,{count:1,from_bound:null,to_bound:null}).done(function(e){var t=e[0];t?s.resolve(t):s.reject()}).fail(function(){s.reject()})):s.reject()},extendedCurrentValue:function(){var t=this,i=t.getParentInstance(),n=i&&i.extendedCurrentValue(),s=e.trim(t.el.val());return P.compact([n,s]).join(" ")},getAjaxParams:function(t,i){var n=this,s=e.trim(n.options.token),r=e.trim(n.options.partner),a=n.options.serviceUrl,l=n.options.url,u=W[t],c=e.extend({timeout:n.options.timeout},u.defaultParams),d={};return l?a=l:(/\/$/.test(a)||(a+="/"),a+=t,u.addTypeInUrl&&(a+="/"+n.type.urlSuffix)),a=P.fixURLProtocol(a),e.support.cors?(s&&(d.Authorization="Token "+s),r&&(d["X-Partner"]=r),d["X-Version"]=o.version,c.headers||(c.headers={}),c.xhrFields||(c.xhrFields={}),e.extend(c.headers,n.options.headers,d),c.xhrFields.withCredentials=!1):(s&&(d.token=s),r&&(d.partner=r),d.version=o.version,a=P.addUrlParams(a,d)),c.url=a,e.extend(c,i)},isQueryRequestable:function(e){var t,i=this;return t=e.length>=i.options.minChars,t&&i.type.isQueryRequestable&&(t=i.type.isQueryRequestable.call(i,e)),t},constructRequestParams:function(t,i){var n=this,s=n.options,r=e.isFunction(s.params)?s.params.call(n.element,t):e.extend({},s.params);return n.type.constructRequestParams&&e.extend(r,n.type.constructRequestParams.call(n)),e.each(n.notify("requestParams"),function(t,i){e.extend(r,i)}),r[s.paramName]=t,e.isNumeric(s.count)&&s.count>0&&(r.count=s.count),e.extend(r,i)},updateSuggestions:function(e){var t=this;t.fetchPhase=t.getSuggestions(e).done(function(i){t.assignSuggestions(i,e)})},getSuggestions:function(t,i,n){var s,r=this,a=r.options,o=n&&n.noCallbacks,l=n&&n.useEnrichmentCache,u=n&&n.method||r.requestMode.method,c=r.constructRequestParams(t,i),d=e.param(c||{}),h=e.Deferred();return s=r.cachedResponse[d],s&&e.isArray(s.suggestions)?h.resolve(s.suggestions):r.isBadQuery(t)?h.reject():o||!1!==a.onSearchStart.call(r.element,c)?r.doGetSuggestions(c,u).done(function(e){r.processResponse(e)&&t==r.currentValue?(a.noCache||(l?r.enrichmentCache[t]=e.suggestions[0]:(r.enrichResponse(e,t),r.cachedResponse[d]=e,a.preventBadQueries&&0===e.suggestions.length&&r.badQueries.push(t))),h.resolve(e.suggestions)):h.reject(),o||a.onSearchComplete.call(r.element,t,e.suggestions)}).fail(function(e,i,n){h.reject(),o||"abort"===i||a.onSearchError.call(r.element,t,e,i,n)}):h.reject(),h},doGetSuggestions:function(t,i){var n=this,s=e.ajax(n.getAjaxParams(i,{data:P.serialize(t)}));return n.abortRequest(),n.currentRequest=s,n.notify("request"),s.always(function(){n.currentRequest=null,n.notify("request")}),s},isBadQuery:function(t){if(!this.options.preventBadQueries)return!1;var i=!1;return e.each(this.badQueries,function(e,n){return!(i=0===t.indexOf(n))}),i},abortRequest:function(){var e=this;e.currentRequest&&e.currentRequest.abort()},processResponse:function(t){var i,n=this;return!(!t||!e.isArray(t.suggestions)||(n.verifySuggestionsFormat(t.suggestions),n.setUnrestrictedValues(t.suggestions),e.isFunction(n.options.onSuggestionsFetch)&&(i=n.options.onSuggestionsFetch.call(n.element,t.suggestions),e.isArray(i)&&(t.suggestions=i)),0))},verifySuggestionsFormat:function(t){"string"==typeof t[0]&&e.each(t,function(e,i){t[e]={value:i,data:null}})},getSuggestionValue:function(t,i){var n,s=this,r=s.options.formatSelected||s.type.formatSelected,a=i&&i.hasSameValues,o=i&&i.hasBeenEnriched,l=null;return e.isFunction(r)&&(n=r.call(s,t)),"string"!=typeof n&&(n=t.value,s.type.getSuggestionValue&&null!==(l=s.type.getSuggestionValue(s,{suggestion:t,hasSameValues:a,hasBeenEnriched:o}))&&(n=l)),n},hasSameValues:function(t){var i=!1;return e.each(this.suggestions,function(e,n){if(n.value===t.value&&n!==t)return i=!0,!1}),i},assignSuggestions:function(e,t){var i=this;i.suggestions=e,i.notify("assignSuggestions",t)},shouldRestrictValues:function(){var e=this;return e.options.restrict_value&&e.constraints&&1==Object.keys(e.constraints).length},setUnrestrictedValues:function(t){var i=this,n=i.shouldRestrictValues(),s=i.getFirstConstraintLabel();e.each(t,function(e,t){t.unrestricted_value||(t.unrestricted_value=n?s+", "+t.value:t.value)})},areSuggestionsSame:function(e,t){return e&&t&&e.value===t.value&&P.areSame(e.data,t.data)},getNoSuggestionsHint:function(){var e=this;return!1!==e.options.noSuggestionsHint&&(e.options.noSuggestionsHint||e.type.noSuggestionsHint)}};var Z={setupElement:function(){this.el.attr("autocomplete","off").attr("autocorrect","off").attr("autocapitalize","off").attr("spellcheck","false").addClass("suggestions-input").css("box-sizing","border-box")},bindElementEvents:function(){var t=this;t.el.on("keydown"+C,e.proxy(t.onElementKeyDown,t)),t.el.on(["keyup"+C,"cut"+C,"paste"+C,"input"+C].join(" "),e.proxy(t.onElementKeyUp,t)),t.el.on("blur"+C,e.proxy(t.onElementBlur,t)),t.el.on("focus"+C,e.proxy(t.onElementFocus,t))},unbindElementEvents:function(){this.el.off(C)},onElementBlur:function(){var e=this;return e.cancelBlur?void(e.cancelBlur=!1):(e.options.triggerSelectOnBlur?e.isUnavailable()||e.selectCurrentValue({noSpace:!0}).always(function(){e.hide()}):e.hide(),void(e.fetchPhase.abort&&e.fetchPhase.abort()))},onElementFocus:function(){var t=this;t.cancelFocus||P.delay(e.proxy(t.completeOnFocus,t)),t.cancelFocus=!1},onElementKeyDown:function(e){var t=this;if(!t.isUnavailable())if(t.visible){switch(e.which){case x.ESC:t.el.val(t.currentValue),t.hide(),t.abortRequest();break;case x.TAB:if(!1===t.options.tabDisabled)return;break;case x.ENTER:t.options.triggerSelectOnEnter&&t.selectCurrentValue();break;case x.SPACE:return void(t.options.triggerSelectOnSpace&&t.isCursorAtEnd()&&(e.preventDefault(),t.selectCurrentValue({continueSelecting:!0,dontEnrich:!0}).fail(function(){t.currentValue+=" ",t.el.val(t.currentValue),t.proceedChangedValue()})));case x.UP:t.moveUp();break;case x.DOWN:t.moveDown();break;default:return}e.stopImmediatePropagation(),e.preventDefault()}else switch(e.which){case x.DOWN:t.suggest();break;case x.ENTER:t.options.triggerSelectOnEnter&&t.triggerOnSelectNothing()}},onElementKeyUp:function(e){var t=this;if(!t.isUnavailable()){switch(e.which){case x.UP:case x.DOWN:case x.ENTER:return}clearTimeout(t.onChangeTimeout),t.inputPhase.reject(),t.currentValue!==t.el.val()&&t.proceedChangedValue()}},proceedChangedValue:function(){var t=this;t.abortRequest(),t.inputPhase=e.Deferred().done(e.proxy(t.onValueChange,t)),t.options.deferRequestBy>0?t.onChangeTimeout=P.delay(function(){t.inputPhase.resolve()},t.options.deferRequestBy):t.inputPhase.resolve()},onValueChange:function(){var e,t=this;t.selection&&(e=t.selection,t.selection=null,t.trigger("InvalidateSelection",e)),t.selectedIndex=-1,t.update(),t.notify("valueChange")},completeOnFocus:function(){var e=this;e.isUnavailable()||e.isElementFocused()&&(e.fixPosition(),e.update(),e.isMobile&&(e.setCursorAtEnd(),e.scrollToTop()))},isElementFocused:function(){return document.activeElement===this.element},isElementDisabled:function(){return Boolean(this.element.getAttribute("disabled")||this.element.getAttribute("readonly"))},isCursorAtEnd:function(){var e,t,i=this,n=i.el.val().length;try{if("number"==typeof(e=i.element.selectionStart))return e===n}catch(e){}return!document.selection||(t=document.selection.createRange(),t.moveStart("character",-n),n===t.text.length)},setCursorAtEnd:function(){var e=this.element;try{e.selectionEnd=e.selectionStart=e.value.length,e.scrollLeft=e.scrollWidth}catch(t){e.value=e.value}}};e.extend(o.prototype,Z),H.on("initialize",Z.bindElementEvents).on("dispose",Z.unbindElementEvents);var Y={};l();var K={checkStatus:function(){function e(e){P.isFunction(t.options.onSearchError)&&t.options.onSearchError.call(t.element,null,s,"error",e)}var t=this,i=t.options.token&&t.options.token.trim()||"",n=t.options.type+i,s=Y[n];s||(s=Y[n]=V.ajax(t.getAjaxParams("status"))),s.done(function(i,n,s){if(i.search){var r=s.getResponseHeader("X-Plan");i.plan=r,V.extend(t.status,i)}else e("Service Unavailable")}).fail(function(){e(s.statusText)})}};o.resetTokens=l,V.extend(o.prototype,K),H.on("setOptions",K.checkStatus);var G,J=!0,X={checkLocation:function(){var t=this,i=t.options.geoLocation;t.type.geoEnabled&&i&&(t.geoLocation=e.Deferred(),e.isPlainObject(i)||e.isArray(i)?t.geoLocation.resolve(i):(G||(G=e.ajax(t.getAjaxParams("detectAddressByIp"))),G.done(function(e){var i=e&&e.location&&e.location.data;i&&i.kladr_id?t.geoLocation.resolve(i):t.geoLocation.reject()}).fail(function(){t.geoLocation.reject()})))},getGeoLocation:function(){return this.geoLocation},constructParams:function(){var t=this,i={};return t.geoLocation&&e.isFunction(t.geoLocation.promise)&&"resolved"==t.geoLocation.state()&&t.geoLocation.done(function(t){i.locations_boost=e.makeArray(t)}),i}};"GET"!=P.getDefaultType()&&(e.extend(O,{geoLocation:J}),e.extend(o,{resetLocation:u}),e.extend(o.prototype,{getGeoLocation:X.getGeoLocation}),H.on("setOptions",X.checkLocation).on("requestParams",X.constructParams));var ee={enrichSuggestion:function(t,i){var n=this,s=e.Deferred();if(!n.options.enrichmentEnabled||!n.type.enrichmentEnabled||!n.requestMode.enrichmentEnabled||i&&i.dontEnrich)return s.resolve(t);if(t.data&&null!=t.data.qc)return s.resolve(t);n.disableDropdown();var r=n.type.getEnrichmentQuery(t),a=n.type.enrichmentParams,o={noCallbacks:!0,useEnrichmentCache:!0,method:n.type.enrichmentMethod};return n.currentValue=r,n.enrichPhase=n.getSuggestions(r,a,o).always(function(){n.enableDropdown()}).done(function(e){var i=e&&e[0];s.resolve(i||t,!!i)}).fail(function(){s.resolve(t)}),s},enrichResponse:function(t,i){var n=this,s=n.enrichmentCache[i];s&&e.each(t.suggestions,function(e,n){if(n.value===i)return t.suggestions[e]=s,!1})}};e.extend(o.prototype,ee);var te={width:"auto",floating:!1},ie={createContainer:function(){var t=this,i="."+t.classes.suggestion,n=t.options,s=e("<div/>").addClass(n.containerClass).css({position:"absolute",display:"none"});t.$container=s,s.on("click"+C,i,e.proxy(t.onSuggestionClick,t))},getContainer:function(){return this.$container.get(0)},removeContainer:function(){var e=this;e.options.floating&&e.$container.remove()},setContainerOptions:function(){var t=this;t.$container.off("mousedown.suggestions"),t.options.floating&&t.$container.on("mousedown.suggestions",e.proxy(t.onMousedown,t))},onSuggestionClick:function(t){var i,n=this,s=e(t.target);if(!n.dropdownDisabled){for(n.cancelFocus=!0,n.el.focus();s.length&&!(i=s.attr("data-index"));)s=s.closest("."+n.classes.suggestion);i&&!isNaN(i)&&n.select(+i)}},setDropdownPosition:function(e,t){var i,n=this,s=n.$viewport.scrollLeft();n.isMobile?(i=n.options.floating?{left:s+"px",top:t.top+t.outerHeight+"px"}:{left:e.left-t.left+s+"px",top:e.top+t.outerHeight+"px"},i.width=n.$viewport.width()+"px"):(i=n.options.floating?{left:t.left+"px",top:t.top+t.borderTop+t.innerHeight+"px"}:{left:e.left+"px",top:e.top+t.borderTop+t.innerHeight+"px"},P.delay(function(){var e=n.options.width;"auto"===e&&(e=n.el.outerWidth()),n.$container.outerWidth(e)})),n.$container.toggleClass(n.classes.mobile,n.isMobile).css(i),n.containerItemsPadding=t.left+t.borderLeft+t.paddingLeft-s},setItemsPositions:function(){var e=this;e.getSuggestionsItems().css("paddingLeft",e.isMobile?e.containerItemsPadding+"px":"")},getSuggestionsItems:function(){return this.$container.children("."+this.classes.suggestion)},toggleDropdownEnabling:function(e){this.dropdownDisabled=!e,this.$container.attr("disabled",!e)},disableDropdown:function(){this.toggleDropdownEnabling(!1)},enableDropdown:function(){this.toggleDropdownEnabling(!0)},hasSuggestionsToChoose:function(){var t=this;return t.suggestions.length>1||1===t.suggestions.length&&(!t.selection||e.trim(t.suggestions[0].value)!==e.trim(t.selection.value))},suggest:function(){var t=this,i=t.options,n=[];if(t.requestMode.userSelect){if(t.hasSuggestionsToChoose())!t.isMobile&&i.hint&&t.suggestions.length&&n.push('<div class="'+t.classes.hint+'">'+i.hint+"</div>"),t.selectedIndex=-1,t.suggestions.forEach(function(e,i){e==t.selection&&(t.selectedIndex=i),t.buildSuggestionHtml(e,i,n)});else{if(t.suggestions.length)return void t.hide();var s=t.getNoSuggestionsHint();if(!s)return void t.hide();n.push('<div class="'+t.classes.hint+'">'+s+"</div>")}n.push('<div class="'+S.promo+'"></div>'),n.push("</div>"),t.$container.html(n.join("")),i.autoSelectFirst&&-1===t.selectedIndex&&(t.selectedIndex=0),-1!==t.selectedIndex&&t.getSuggestionsItems().eq(t.selectedIndex).addClass(t.classes.selected),e.isFunction(i.beforeRender)&&i.beforeRender.call(t.element,t.$container),t.$container.show(),t.visible=!0,t.fixPosition(),t.setItemsPositions()}},buildSuggestionHtml:function(e,t,i){i.push('<div class="'+this.classes.suggestion+'" data-index="'+t+'">');var n=this.options.formatResult||this.type.formatResult||this.formatResult;i.push(n.call(this,e.value,this.currentValue,e,{unformattableTokens:this.type.unformattableTokens}));var s=this.makeSuggestionLabel(this.suggestions,e);s&&i.push('<span class="'+this.classes.subtext_label+'">'+P.escapeHtml(s)+"</span>"),i.push("</div>")},wrapFormattedValue:function(e,t){var i=this,n=P.getDeepValue(t.data,"state.status");return'<span class="'+i.classes.value+'"'+(n?' data-suggestion-status="'+n+'"':"")+">"+e+"</span>"},formatResult:function(e,t,i,n){var s=this;return e=s.highlightMatches(e,t,i,n),s.wrapFormattedValue(e,i)},highlightMatches:function(t,i,n,s){var r,a,o,l,u,h,f,p=this,g=[],m=s&&s.unformattableTokens,v=s&&s.maxLength,y=P.reWordExtractor();if(!t)return"";for(r=T.tokenize(i,m),a=e.map(r,function(e){return new RegExp("^((.*)([\\-\\+\\\\\\?!@#$%^&]+))?("+P.escapeRegExChars(e)+")([^\\-\\+\\\\\\?!@#$%^&]*[\\-\\+\\\\\\?!@#$%^&]*)","i")});(o=y.exec(t))&&o[0];)l=o[1],g.push({text:l,hasUpperCase:l.toLowerCase()!==l,formatted:P.formatToken(l),matchable:!0}),o[2]&&g.push({text:o[2]});for(u=0;u<g.length;u++)h=g[u],!h.matchable||h.matched||-1!==e.inArray(h.formatted,m)&&!h.hasUpperCase||e.each(a,function(e,t){var i,n=t.exec(h.formatted),s=u+1;if(n)return n={before:n[1]||"",beforeText:n[2]||"",beforeDelimiter:n[3]||"",text:n[4]||"",after:n[5]||""},n.before&&(g.splice(u,0,{text:h.text.substr(0,n.beforeText.length),formatted:n.beforeText,matchable:!0},{text:n.beforeDelimiter}),s+=2,i=n.before.length,h.text=h.text.substr(i),h.formatted=h.formatted.substr(i),u--),i=n.text.length+n.after.length,h.formatted.length>i&&(g.splice(s,0,{text:h.text.substr(i),formatted:h.formatted.substr(i),matchable:!0}),h.text=h.text.substr(0,i),h.formatted=h.formatted.substr(0,i)),n.after&&(i=n.text.length,g.splice(s,0,{text:h.text.substr(i),formatted:h.formatted.substr(i)}),h.text=h.text.substr(0,i),h.formatted=h.formatted.substr(0,i)),h.matched=!0,!1});if(v){for(u=0;u<g.length&&v>=0;u++)h=g[u],(v-=h.text.length)<0&&(h.text=h.text.substr(0,h.text.length+v)+"...");g.length=u}return f=c(g),d(f,p.classes.nowrap)},makeSuggestionLabel:function(t,i){var n,s,r=this,a=r.type.fieldNames,o={},l=P.reWordExtractor(),u=[];if(a&&h(t,i)&&i.data&&(e.each(a,function(e){var t=i.data[e];t&&(o[e]=P.formatToken(t))}),!e.isEmptyObject(o))){for(;(n=l.exec(P.formatToken(i.value)))&&(s=n[1]);)e.each(o,function(e,t){if(t==s)return u.push(a[e]),delete o[e],!1});if(u.length)return u.join(", ")}},hide:function(){var e=this;e.visible=!1,e.selectedIndex=-1,e.$container.hide().empty()},activate:function(e){var t,i,n=this,s=n.classes.selected;return!n.dropdownDisabled&&(i=n.getSuggestionsItems(),i.removeClass(s),n.selectedIndex=e,-1!==n.selectedIndex&&i.length>n.selectedIndex)?(t=i.eq(n.selectedIndex),t.addClass(s),t):null},deactivate:function(e){var t=this;t.dropdownDisabled||(t.selectedIndex=-1,t.getSuggestionsItems().removeClass(t.classes.selected),e&&t.el.val(t.currentValue))},moveUp:function(){var e=this;if(!e.dropdownDisabled)return-1===e.selectedIndex?void(e.suggestions.length&&e.adjustScroll(e.suggestions.length-1)):0===e.selectedIndex?void e.deactivate(!0):void e.adjustScroll(e.selectedIndex-1)},moveDown:function(){var e=this;if(!e.dropdownDisabled)return e.selectedIndex===e.suggestions.length-1?void e.deactivate(!0):void e.adjustScroll(e.selectedIndex+1)},adjustScroll:function(e){var t,i,n,s=this,r=s.activate(e),a=s.$container.scrollTop();r&&r.length&&(t=r.position().top,t<0?s.$container.scrollTop(a+t):(i=t+r.outerHeight(),n=s.$container.innerHeight(),i>n&&s.$container.scrollTop(a-n+i)),s.el.val(s.suggestions[e].value))}};e.extend(O,te),e.extend(o.prototype,ie),H.on("initialize",ie.createContainer).on("dispose",ie.removeContainer).on("setOptions",ie.setContainerOptions).on("fixPosition",ie.setDropdownPosition).on("fixPosition",ie.setItemsPositions).on("assignSuggestions",ie.suggest);var ne={addon:null},se={NONE:"none",SPINNER:"spinner",CLEAR:"clear"},re=function(e){var t=V.select('<span class="suggestions-addon"/>');this.owner=e,this.$el=t,this.type=se.NONE,this.visible=!1,this.initialPadding=null,t.on("click",V.proxy(this,"onClick"))};re.prototype={checkType:function(){var e=this.owner.options.addon,t=!1;y.each(se,function(i,n){if(t=i==e)return!1}),t||(e=this.owner.isMobile?se.CLEAR:se.SPINNER),e!=this.type&&(this.type=e,this.$el.attr("data-addon-type",e),this.toggle(!0))},isEnabled:function(){return!this.owner.isElementDisabled()},toggle:function(e){var t;switch(this.type){case se.CLEAR:t=!!this.owner.currentValue;break;case se.SPINNER:t=!!this.owner.currentRequest;break;default:t=!1}this.isEnabled()||(t=!1),t!=this.visible&&(this.visible=t,t?this.show(e):this.hide(e))},show:function(e){var t=this,i={opacity:1};e?(this.$el.show().css(i),this.showBackground(!0)):this.$el.stop(!0,!0).delay(50).queue(function(){t.$el.show(),t.showBackground(),t.$el.dequeue()}).animate(i,"fast")},hide:function(e){var t=this,i={opacity:0};e&&this.$el.hide().css(i),this.$el.stop(!0).animate(i,{duration:"fast",complete:function(){t.$el.hide(),t.hideBackground()}})},fixPosition:function(e,t){var i=t.innerHeight;this.checkType(),this.$el.css({left:e.left+t.borderLeft+t.innerWidth-i+"px",top:e.top+t.borderTop+"px",height:i,width:i}),this.initialPadding=t.paddingRight,this.width=i,this.visible&&(t.componentsRight+=i)},showBackground:function(e){var t=this.owner.el,i={paddingRight:this.width};this.width>this.initialPadding&&(this.stopBackground(),e?t.css(i):t.animate(i,{duration:"fast",queue:"addon"}).dequeue("addon"))},hideBackground:function(e){var t=this.owner.el,i={paddingRight:this.initialPadding};this.width>this.initialPadding&&(this.stopBackground(!0),e?t.css(i):t.delay(1e3,"addon").animate(i,{duration:"fast",queue:"addon"}).dequeue("addon"))},stopBackground:function(e){this.owner.el.stop("addon",!0,e)},onClick:function(e){this.isEnabled()&&this.type==se.CLEAR&&this.owner.clear()}};var ae={createAddon:function(){var e=new re(this);this.$wrapper.append(e.$el),this.addon=e},fixAddonPosition:function(e,t){this.addon.fixPosition(e,t)},checkAddonType:function(){this.addon.checkType()},checkAddonVisibility:function(){this.addon.toggle()},stopBackground:function(){this.addon.stopBackground()}};V.extend(O,ne),H.on("initialize",ae.createAddon).on("setOptions",ae.checkAddonType).on("fixPosition",ae.fixAddonPosition).on("clear",ae.checkAddonVisibility).on("valueChange",ae.checkAddonVisibility).on("request",ae.checkAddonVisibility).on("resetPosition",ae.stopBackground);var oe={constraints:null,restrict_value:!1},le=["region_fias_id","area_fias_id","city_fias_id","city_district_fias_id","settlement_fias_id","street_fias_id"],ue=function(e,t){var i,n,s=this,r={};s.instance=t,s.fields={},s.specificity=-1,v.isPlainObject(e)&&t.type.dataComponents&&y.each(t.type.dataComponents,function(t,i){var n=t.id;t.forLocations&&e[n]&&(s.fields[n]=e[n],s.specificity=i)}),i=Object.keys(s.fields),n=y.intersect(i,le),n.length?(y.each(n,function(e,t){r[e]=s.fields[e]}),s.fields=r,s.specificity=s.getFiasSpecificity(n)):s.fields.kladr_id&&(s.fields={kladr_id:s.fields.kladr_id},s.significantKladr=p(s.fields.kladr_id),s.specificity=s.getKladrSpecificity(s.significantKladr))};V.extend(ue.prototype,{getLabel:function(){return this.instance.type.composeValue(this.fields,{saveCityDistrict:!0})},getFields:function(){return this.fields},isValid:function(){return!v.isEmptyObject(this.fields)},getKladrSpecificity:function(e){var t=-1,i=e.length;return y.each(this.instance.type.dataComponents,function(e,n){e.kladrFormat&&i===e.kladrFormat.digits&&(t=n)}),t},getFiasSpecificity:function(e){var t=-1;return y.each(this.instance.type.dataComponents,function(i,n){i.fiasType&&e.indexOf(i.fiasType)>-1&&t<n&&(t=n)}),t},containsData:function(e){var t=!0;return this.fields.kladr_id?!!e.kladr_id&&0===e.kladr_id.indexOf(this.significantKladr):(y.each(this.fields,function(i,n){return t=!!e[n]&&e[n].toLowerCase()===i.toLowerCase()}),t)}}),o.ConstraintLocation=ue;var ce=function(e,t){this.id=R("c"),this.deletable=!!e.deletable,this.instance=t;var i=y.makeArray(e&&(e.locations||e.restrictions));this.locations=i.map(function(e){return new ue(e,t)}),this.locations=this.locations.filter(function(e){return e.isValid()}),this.label=e.label,null==this.label&&t.type.composeValue&&(this.label=this.locations.map(function(e){return e.getLabel()}).join(", ")),this.label&&this.isValid()&&(this.$el=V.select(document.createElement("li")).append(V.select(document.createElement("span")).text(this.label)).attr("data-constraint-id",this.id),this.deletable&&this.$el.append(V.select(document.createElement("span")).addClass(t.classes.removeConstraint)))};V.extend(ce.prototype,{isValid:function(){return this.locations.length>0},getFields:function(){return this.locations.map(function(e){return e.getFields()})}});var de={createConstraints:function(){var e=this;e.constraints={},e.$constraints=V.select('<ul class="suggestions-constraints"/>'),e.$wrapper.append(e.$constraints),e.$constraints.on("click","."+e.classes.removeConstraint,V.proxy(e.onConstraintRemoveClick,e))},setConstraintsPosition:function(e,t){var i=this;i.$constraints.css({left:e.left+t.borderLeft+t.paddingLeft+"px",top:e.top+t.borderTop+Math.round((t.innerHeight-i.$constraints.height())/2)+"px"}),t.componentsLeft+=i.$constraints.outerWidth(!0)+t.paddingLeft},onConstraintRemoveClick:function(e){var t=this,i=V.select(e.target).closest("li"),n=i.attr("data-constraint-id");delete t.constraints[n],t.update(),i.fadeOut("fast",function(){t.removeConstraint(n)})},setupConstraints:function(){var e,t=this,i=t.options.constraints;return i?void(V.isJqObject(i)||"string"==typeof i||"number"==typeof i.nodeType?(e=V.select(i),e.is(t.constraints)||(t.unbindFromParent(),e.is(t.el)||(t.constraints=e,t.bindToParent()))):(t._constraintsUpdating=!0,y.each(t.constraints,function(e,i){t.removeConstraint(i)}),y.each(y.makeArray(i),function(e,i){t.addConstraint(e)}),t._constraintsUpdating=!1,t.fixPosition())):void t.unbindFromParent()},filteredLocation:function(e){var t=[],i={};if(y.each(this.type.dataComponents,function(){this.forLocations&&t.push(this.id)}),v.isPlainObject(e)&&y.each(e,function(e,n){e&&t.indexOf(n)>=0&&(i[n]=e)}),!v.isEmptyObject(i))return i.kladr_id?{kladr_id:i.kladr_id}:i},addConstraint:function(e){var t=this;e=new ce(e,t),e.isValid()&&(t.constraints[e.id]=e,e.$el&&(t.$constraints.append(e.$el),t._constraintsUpdating||t.fixPosition()))},removeConstraint:function(e){var t=this;delete t.constraints[e],t.$constraints.children('[data-constraint-id="'+e+'"]').remove(),t._constraintsUpdating||t.fixPosition()},constructConstraintsParams:function(){for(var e,t,i=this,n=[],s=i.constraints,r={};V.isJqObject(s)&&(e=s.suggestions())&&!(t=w.getDeepValue(e,"selection.data"));)s=e.constraints;return V.isJqObject(s)?(t=new ue(t,e).getFields())&&(i.bounds.own.indexOf("city")>-1&&delete t.city_fias_id,r.locations=[t],r.restrict_value=!0):s&&(y.each(s,function(e,t){n=n.concat(e.getFields())}),n.length&&(r.locations=n,r.restrict_value=i.options.restrict_value)),r},getFirstConstraintLabel:function(){var e=this,t=v.isPlainObject(e.constraints)&&Object.keys(e.constraints)[0];return t?e.constraints[t].label:""},bindToParent:function(){var e=this;e.constraints.on(["suggestions-select."+e.uniqueId,"suggestions-invalidateselection."+e.uniqueId,"suggestions-clear."+e.uniqueId].join(" "),V.proxy(e.onParentSelectionChanged,e)).on("suggestions-dispose."+e.uniqueId,V.proxy(e.onParentDispose,e))},unbindFromParent:function(){var e=this,t=e.constraints;V.isJqObject(t)&&t.off("."+e.uniqueId)},onParentSelectionChanged:function(e,t,i){("suggestions-select"!==e.type||i)&&this.clear()},onParentDispose:function(e){this.unbindFromParent()},getParentInstance:function(){return V.isJqObject(this.constraints)&&this.constraints.suggestions()},shareWithParent:function(e){var t=this.getParentInstance();t&&t.type===this.type&&!f(e,t)&&(t.shareWithParent(e),t.setSuggestion(e))},getUnrestrictedData:function(e){var t=this,i=[],n={},s=-1;return y.each(t.constraints,function(t,i){y.each(t.locations,function(t,i){t.containsData(e)&&t.specificity>s&&(s=t.specificity)})}),s>=0?(e.region_kladr_id&&e.region_kladr_id===e.city_kladr_id&&i.push.apply(i,t.type.dataComponentsById.city.fields),y.each(t.type.dataComponents.slice(0,s+1),function(e,t){i.push.apply(i,e.fields)}),y.each(e,function(e,t){-1===i.indexOf(t)&&(n[t]=e)})):n=e,n}};V.extend(O,oe),V.extend(o.prototype,de),"GET"!=L.getDefaultType()&&H.on("initialize",de.createConstraints).on("setOptions",de.setupConstraints).on("fixPosition",de.setConstraintsPosition).on("requestParams",de.constructConstraintsParams).on("dispose",de.unbindFromParent);var he={proceedQuery:function(e){var t=this;e.length>=t.options.minChars?t.updateSuggestions(e):t.hide()},selectCurrentValue:function(e){var t=this,i=V.Deferred();return t.inputPhase.resolve(),t.fetchPhase.done(function(){var n;t.selection&&!t.visible?i.reject():(n=t.findSuggestionIndex(),t.select(n,e),-1===n?i.reject():i.resolve(n))}).fail(function(){i.reject()}),i},selectFoundSuggestion:function(){var e=this;e.requestMode.userSelect||e.select(0)},findSuggestionIndex:function(){var e,t=this,i=t.selectedIndex;return-1===i&&(e=t.el.val().trim())&&t.type.matchers.some(function(n){return-1!==(i=n(e,t.suggestions))}),i},select:function(e,t){var i,n=this,s=n.suggestions[e],r=t&&t.continueSelecting,a=n.currentValue;if(!n.triggering.Select){if(!s)return r||n.selection||n.triggerOnSelectNothing(),void n.onSelectComplete(r);i=n.hasSameValues(s),n.enrichSuggestion(s,t).done(function(s,r){var o=V.extend({hasBeenEnriched:r,hasSameValues:i},t);n.selectSuggestion(s,e,a,o)})}},selectSuggestion:function(e,t,i,n){var s=this,r=n.continueSelecting,a=!s.type.isDataComplete||s.type.isDataComplete.call(s,e),o=s.selection;s.triggering.Select||(s.type.alwaysContinueSelecting&&(r=!0),a&&(r=!1),n.hasBeenEnriched&&s.suggestions[t]&&(s.suggestions[t].data=e.data),s.requestMode.updateValue&&(s.checkValueBounds(e),s.currentValue=s.getSuggestionValue(e,n),!s.currentValue||n.noSpace||a||(s.currentValue+=" "),s.el.val(s.currentValue)),s.currentValue?(s.selection=e,s.areSuggestionsSame(e,o)||s.trigger("Select",e,s.currentValue!=i),s.requestMode.userSelect&&s.onSelectComplete(r)):(s.selection=null,s.triggerOnSelectNothing()),s.shareWithParent(e))},onSelectComplete:function(e){var t=this;e?(t.selectedIndex=-1,t.updateSuggestions(t.currentValue)):t.hide()},triggerOnSelectNothing:function(){var e=this;e.triggering.SelectNothing||e.trigger("SelectNothing",e.currentValue)},trigger:function(e){var t=this,i=P.slice(arguments,1),n=t.options["on"+e];t.triggering[e]=!0,P.isFunction(n)&&n.apply(t.element,i),t.el.trigger.call(t.el,"suggestions-"+e.toLowerCase(),i),t.triggering[e]=!1}};V.extend(o.prototype,he),H.on("assignSuggestions",he.selectFoundSuggestion);var fe={bounds:null},pe={setupBounds:function(){this.bounds={from:null,to:null}},setBoundsOptions:function(){var t,i,n=this,s=[],r=e.trim(n.options.bounds).split("-"),a=r[0],o=r[r.length-1],l=[],u=[];n.type.dataComponents&&e.each(n.type.dataComponents,function(){this.forBounds&&s.push(this.id)}),-1===e.inArray(a,s)&&(a=null),i=e.inArray(o,s),-1!==i&&i!==s.length-1||(o=null),(a||o)&&(t=!a,e.each(s,function(e,i){if(i==a&&(t=!0),u.push(i),t&&l.push(i),i==o)return!1})),n.bounds.from=a,n.bounds.to=o,n.bounds.all=u,n.bounds.own=l},constructBoundsParams:function(){var e=this,t={};return e.bounds.from&&(t.from_bound={value:e.bounds.from}),e.bounds.to&&(t.to_bound={value:e.bounds.to}),t},checkValueBounds:function(e){var t,i=this;if(i.bounds.own.length&&i.type.composeValue){var n=i.bounds.own.slice(0);1===n.length&&"city_district"===n[0]&&n.push("city_district_fias_id"),t=i.copyDataComponents(e.data,n),e.value=i.type.composeValue(t)}},copyDataComponents:function(t,i){var n={},s=this.type.dataComponentsById;return s&&e.each(i,function(i,r){e.each(s[r].fields,function(e,i){null!=t[i]&&(n[i]=t[i])})}),n},getBoundedKladrId:function(t,i){var n,s=i[i.length-1];return e.each(this.type.dataComponents,function(e,t){if(t.id===s)return n=t.kladrFormat,!1}),t.substr(0,n.digits)+new Array((n.zeros||0)+1).join("0")}};e.extend(O,fe),e.extend(o.prototype,pe),H.on("initialize",pe.setupBounds).on("setOptions",pe.setBoundsOptions).on("requestParams",pe.constructBoundsParams);var ge={selectByClass:function(e,t){var i="."+e;return t?t.querySelector(i):document.querySelector(i)},addClass:function(e,t){var i=e.className.split(" ");-1===i.indexOf(t)&&i.push(t),e.className=i.join(" ")},setStyle:function(e,t,i){e.style[t]=i},listenTo:function(e,t,i,n){e.addEventListener(t,n,!1),i&&(eventsByNamespace[i]||(eventsByNamespace[i]=[]),eventsByNamespace[i].push({eventName:t,element:e,callback:n}))},stopListeningNamespace:function(e){var t=eventsByNamespace[e];t&&t.forEach(function(e){e.element.removeEventListener(e.eventName,e.callback,!1)})}};g.prototype.show=function(){"FREE"===this.plan&&this.element&&(this.setStyles(),this.setHtml())},g.prototype.setStyles=function(){this.element.style.display="block",this.isMobile||this.element.classList.add(S.promo_desktop)},g.prototype.setHtml=function(){this.element.innerHTML='<a target="_blank" href="https://dadata.ru/suggestions/?utm_source=dadata&utm_medium=module&utm_campaign=suggestions-jquery"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 167.55 38.92"><defs><style>.cls-1{fill:#cdcccc;}.cls-2{fill:#ef4741;}.cls-3{fill:#fff;}</style></defs><title>dadata-logo</title><path class="cls-1" d="M192.61,153.07H196v-3.15h-3.39Zm9.55-14.46v-2.45h-3v16.91h3.14V142.2a4.39,4.39,0,0,1,4.23-3.7h1.75v-2.69h-1.54C203.75,135.81,202.35,137.76,202.16,138.61Zm20.2-2.45v11.3a5,5,0,0,1-4.65,3.66,7.19,7.19,0,0,1-2-.23,2,2,0,0,1-1.12-.6,2.38,2.38,0,0,1-.44-.86,4.38,4.38,0,0,1-.1-1V136.16h-3.14v12.4a4.83,4.83,0,0,0,1.26,3.65q1.26,1.21,4.61,1.21c3.38,0,4.62-.91,5.56-2.34v2h3.14V136.16Z" transform="translate(-57.96 -122.27)"/><rect class="cls-2" width="131.91" height="38.92" rx="3" ry="3"/><path class="cls-3" d="M119.34,130.39h-9.18v22.68h10.23c3.84,0,10.18-.35,10.18-6.88v-8.91C130.56,130.74,123.18,130.39,119.34,130.39Zm5.77,15.2c0,3.27-2.38,3.6-5.09,3.6h-4.41V134.27H119c2.71,0,6.14.33,6.14,3.6Zm-48-15.2H68v22.68H78.18c3.84,0,10.18-.35,10.18-6.88v-8.91C88.36,130.74,81,130.39,77.14,130.39Zm5.77,15.2c0,3.27-2.38,3.6-5.09,3.6H73.41V134.27h3.36c2.71,0,6.14.33,6.14,3.6Zm74-14.32h-5.1V148a6.28,6.28,0,0,0,.4,2.36,4,4,0,0,0,1,1.54,4.56,4.56,0,0,0,1.57.88,8.16,8.16,0,0,0,1.85.42q.89.08,2.08.09a24.23,24.23,0,0,0,2.83-.17v-2.87h-1.82a3.08,3.08,0,0,1-2.31-.61,3.79,3.79,0,0,1-.52-2.36V139h4.65v-3.14h-4.65Zm21,5.68q-1.82-1.14-6.5-1.13h-5.92v.25l.73,2.9h5.19a5,5,0,0,1,2.5.5,2.37,2.37,0,0,1,.72,2v1.15H168.9q-3,0-4.12,1.17T163.62,148c0,2.21.37,3.14,1.12,3.84s2.2,1.22,4.48,1.22h7.06c1.76,0,3.45-.83,3.45-2.82v-8.81Q179.73,138.08,177.91,136.94Zm-3.29,13.3h-3.35a4.27,4.27,0,0,1-2.22-.35q-.44-.35-.44-2t.42-2.06a3.55,3.55,0,0,1,2.1-.38h3.49Zm-27.5-13.3q-1.82-1.14-6.5-1.13h-5.92v.25l.73,2.9h5.19a5,5,0,0,1,2.5.5,2.38,2.38,0,0,1,.72,2v1.15h-5.73q-3,0-4.12,1.17T132.84,148c0,2.21.37,3.14,1.12,3.84s2.2,1.22,4.48,1.22h7.06c1.77,0,3.45-.83,3.45-2.82v-8.81Q148.94,138.08,147.13,136.94Zm-3.28,13.3h-3.35a4.27,4.27,0,0,1-2.22-.35q-.44-.35-.44-2t.42-2.06a3.55,3.55,0,0,1,2.1-.38h3.49Zm-38.92-13.3q-1.82-1.14-6.5-1.13H92.5v.25l.73,2.9h5.19a5,5,0,0,1,2.5.5,2.38,2.38,0,0,1,.72,2v1.15H95.91q-3,0-4.12,1.17T90.63,148c0,2.21.37,3.14,1.12,3.84s2.2,1.22,4.48,1.22h7.06c1.77,0,3.45-.83,3.45-2.82v-8.81Q106.74,138.08,104.92,136.94Zm-3.28,13.3H98.29a4.27,4.27,0,0,1-2.22-.35q-.44-.35-.44-2t.42-2.06a3.55,3.55,0,0,1,2.1-.38h3.49Z" transform="translate(-57.96 -122.27)"/></svg></a>'},H.on("assignSuggestions",m),o.defaultOptions=O,o.version="18.12.0",e.Suggestions=o,e.fn.suggestions=function(t,i){return 0===arguments.length?this.first().data("suggestions"):this.each(function(){var n=e(this),s=n.data("suggestions");"string"==typeof t?s&&"function"==typeof s[t]&&s[t](i):(s&&s.dispose&&s.dispose(),s=new o(this,t),n.data("suggestions",s))})}}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=e.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.submitButton=t.currentTarget,e(this).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(t){function n(){var n,s;return i.submitButton&&(i.settings.submitHandler||i.formSubmitted)&&(n=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),!(i.settings.submitHandler&&!i.settings.debug)||(s=i.settings.submitHandler.call(i,i.currentForm,t),n&&n.remove(),void 0!==s&&s)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){var t,i,n;return e(this[0]).is("form")?t=this.validate().form():(n=[],t=!0,i=e(this[0].form).validate(),this.each(function(){t=i.element(this)&&t,t||(n=n.concat(i.errorList))}),i.errorList=n),t},rules:function(t,i){var n,s,r,a,o,l,u=this[0],c="undefined"!=typeof this.attr("contenteditable")&&"false"!==this.attr("contenteditable");if(null!=u&&(!u.form&&c&&(u.form=this.closest("form")[0],u.name=this.attr("name")),null!=u.form)){if(t)switch(n=e.data(u.form,"validator").settings,s=n.rules,r=e.validator.staticRules(u),t){case"add":e.extend(r,e.validator.normalizeRule(i)),delete r.messages,s[u.name]=r,i.messages&&(n.messages[u.name]=e.extend(n.messages[u.name],i.messages));break;case"remove":return i?(l={},e.each(i.split(/\s/),function(e,t){l[t]=r[t],delete r[t]}),l):(delete s[u.name],r)}return a=e.validator.normalizeRules(e.extend({},e.validator.classRules(u),e.validator.attributeRules(u),e.validator.dataRules(u),e.validator.staticRules(u)),u),a.required&&(o=a.required,delete a.required,a=e.extend({required:o},a)),a.remote&&(o=a.remote,delete a.remote,a=e.extend(a,{remote:o})),a}}}),e.extend(e.expr.pseudos||e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){var i=e(t).val();return null!==i&&!!e.trim(""+i)},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:void 0===i?t:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,i){var n=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===i.which&&""===this.elementValue(t)||e.inArray(i.keyCode,n)!==-1||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(n):e(t).addClass(i).removeClass(n)},unhighlight:function(t,i,n){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(n):e(t).removeClass(i).addClass(n)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}."),step:e.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i="undefined"!=typeof e(this).attr("contenteditable")&&"false"!==e(this).attr("contenteditable");if(!this.form&&i&&(this.form=e(this).closest("form")[0],this.name=e(this).attr("name")),n===this.form){var s=e.data(this.form,"validator"),r="on"+t.type.replace(/^validate/,""),a=s.settings;a[r]&&!e(this).is(a.ignore)&&a[r].call(s,this,t)}}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.currentForm,s=this.groups={};e.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/)),e.each(i,function(e,i){s[i]=t})}),i=this.settings.rules,e.each(i,function(t,n){i[t]=e.validator.normalizeRule(n)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable], [type='button']",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i,n,s=this.clean(t),r=this.validationTargetFor(s),a=this,o=!0;return void 0===r?delete this.invalid[s.name]:(this.prepareElement(r),this.currentElements=e(r),n=this.groups[r.name],n&&e.each(this.groups,function(e,t){t===n&&e!==r.name&&(s=a.validationTargetFor(a.clean(a.findByName(e))),s&&s.name in a.invalid&&(a.currentElements.push(s),o=a.check(s)&&o))}),i=this.check(r)!==!1,o=o&&i,i?this.invalid[r.name]=!1:this.invalid[r.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!i)),o},showErrors:function(t){if(t){var i=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,function(e,t){return{message:e,element:i.findByName(t)[0]}}),this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)void 0!==e[t]&&null!==e[t]&&e[t]!==!1&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").trigger("focus").trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var n=this.name||e(this).attr("name"),s="undefined"!=typeof e(this).attr("contenteditable")&&"false"!==e(this).attr("contenteditable");return!n&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),s&&(this.form=e(this).closest("form")[0],this.name=n),!(this.form!==t.currentForm||n in i||!t.objectLength(e(this).rules())||(i[n]=!0,0))})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,n,s=e(t),r=t.type,a="undefined"!=typeof s.attr("contenteditable")&&"false"!==s.attr("contenteditable");return"radio"===r||"checkbox"===r?this.findByName(t.name).filter(":checked").val():"number"===r&&"undefined"!=typeof t.validity?t.validity.badInput?"NaN":s.val():(i=a?s.text():s.val(),"file"===r?"C:\\fakepath\\"===i.substr(0,12)?i.substr(12):(n=i.lastIndexOf("/"),n>=0?i.substr(n+1):(n=i.lastIndexOf("\\"),n>=0?i.substr(n+1):i)):"string"==typeof i?i.replace(/\r/g,""):i)},check:function(t){t=this.validationTargetFor(this.clean(t));var i,n,s,r,a=e(t).rules(),o=e.map(a,function(e,t){return t}).length,l=!1,u=this.elementValue(t);"function"==typeof a.normalizer?r=a.normalizer:"function"==typeof this.settings.normalizer&&(r=this.settings.normalizer),r&&(u=r.call(t,u),delete a.normalizer);for(n in a){s={method:n,parameters:a[n]};try{if(i=e.validator.methods[n].call(this,u,t,s.parameters),"dependency-mismatch"===i&&1===o){l=!0;continue}if(l=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,s),!1}catch(c){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+s.method+"' method.",c),c instanceof TypeError&&(c.message+=".  Exception occurred when checking element "+t.id+", check the '"+s.method+"' method."),c}}if(!l)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){"string"==typeof i&&(i={method:i});var n=this.findDefined(this.customMessage(t.name,i.method),this.customDataMessage(t,i.method),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),s=/\$?\{(\d+)\}/g;return"function"==typeof n?n=n.call(this,i.parameters,t):s.test(n)&&(n=e.validator.format(n.replace(s,"{$1}"),i.parameters)),n},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t);this.errorList.push({message:i,element:e,method:t.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var n,s,r,a,o=this.errorsFor(t),l=this.idOrName(t),u=e(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(i)):(o=e("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(i||""),n=o,this.settings.wrapper&&(n=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement.call(this,n,e(t)):n.insertAfter(t),o.is("label")?o.attr("for",l):0===o.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(r=o.attr("id"),u?u.match(new RegExp("\\b"+this.escapeCssMeta(r)+"\\b"))||(u+=" "+r):u=r,e(t).attr("aria-describedby",u),s=this.groups[t.name],s&&(a=this,e.each(a.groups,function(t,i){i===s&&e("[name='"+a.escapeCssMeta(t)+"']",a.currentForm).attr("aria-describedby",o.attr("id"))})))),!i&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var i=this.escapeCssMeta(this.idOrName(t)),n=e(t).attr("aria-describedby"),s="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(s=s+", #"+this.escapeCssMeta(n).replace(/\s+/g,", #")),this.errors().filter(s)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{"boolean":function(e){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.submitButton&&e("input:hidden[name='"+this.submitButton.name+"']",this.currentForm).remove(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,i){return i="string"==typeof i&&i||"remote",e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:i})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur").find(".validate-lessThan-blur").off(".validate-lessThan").removeClass("validate-lessThan-blur").find(".validate-lessThanEqual-blur").off(".validate-lessThanEqual").removeClass("validate-lessThanEqual-blur").find(".validate-greaterThanEqual-blur").off(".validate-greaterThanEqual").removeClass("validate-greaterThanEqual-blur").find(".validate-greaterThan-blur").off(".validate-greaterThan").removeClass("validate-greaterThan-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},n=e(t).attr("class");return n&&e.each(n.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(e,t,i,n){/min|max|step/.test(i)&&(null===t||/number|range|text/.test(t))&&(n=Number(n),isNaN(n)&&(n=void 0)),n||0===n?e[i]=n:t===i&&"range"!==t&&(e[i]=!0)},attributeRules:function(t){var i,n,s={},r=e(t),a=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(n=t.getAttribute(i),""===n&&(n=!0),n=!!n):n=r.attr(i),this.normalizeAttributeRule(s,a,i,n);return s.maxlength&&/-1|2147483647|524288/.test(s.maxlength)&&delete s.maxlength,s},dataRules:function(t){var i,n,s={},r=e(t),a=t.getAttribute("type");for(i in e.validator.methods)n=r.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),""===n&&(n=!0),this.normalizeAttributeRule(s,a,i,n);return s},staticRules:function(t){var i={},n=e.data(t.form,"validator");return n.settings.rules&&(i=e.validator.normalizeRule(n.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(n,s){if(s===!1)return void delete t[n];if(s.param||s.depends){var r=!0;switch(typeof s.depends){case"string":r=!!e(s.depends,i.form).length;break;case"function":r=s.depends.call(i,i)}r?t[n]=void 0===s.param||s.param:(e.data(i.form,"validator").resetElements(e(i)),delete t[n])}}),e.each(t,function(n,s){t[n]=e.isFunction(s)&&"normalizer"!==n?s(i):s}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,n){e.validator.methods[t]=i,e.validator.messages[t]=void 0!==n?n:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var s=e(i).val();return s&&s.length>0}return this.checkable(i)?this.getLength(t,i)>0:void 0!==t&&null!==t&&t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)},date:function(){var e=!1;return function(t,i){return e||(e=!0,this.settings.debug&&window.console&&console.warn("The `date` method is deprecated and will be removed in version '2.0.0'.\nPlease don't use it, since it relies on the Date constructor, which\nbehaves very differently across browsers and locales. Use `dateISO`\ninstead or one of the locale specific methods in `localizations/`\nand `additional-methods.js`.")),this.optional(i)||!/Invalid|NaN/.test(new Date(t).toString())}}(),dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s>=n},maxlength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s<=n},rangelength:function(t,i,n){var s=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||s>=n[0]&&s<=n[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||e<=i},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},step:function(t,i,n){var s,r=e(i).attr("type"),a="Step attribute on input type "+r+" is not supported.",o=["text","number","range"],l=new RegExp("\\b"+r+"\\b"),u=r&&!l.test(o.join()),c=function(e){var t=(""+e).match(/(?:\.(\d+))?$/);return t&&t[1]?t[1].length:0},d=function(e){return Math.round(e*Math.pow(10,s))},h=!0;if(u)throw new Error(a);return s=c(n),(c(t)>s||d(t)%d(n)!==0)&&(h=!1),this.optional(i)||h},equalTo:function(t,i,n){var s=e(n);return this.settings.onfocusout&&s.not(".validate-equalTo-blur").length&&s.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){e(i).valid()}),t===s.val()},remote:function(t,i,n,s){if(this.optional(i))return"dependency-mismatch";s="string"==typeof s&&s||"remote";var r,a,o,l=this.previousValue(i,s);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[i.name][s],this.settings.messages[i.name][s]=l.message,n="string"==typeof n&&{url:n}||n,o=e.param(e.extend({data:t},n.data)),l.old===o?l.valid:(l.old=o,r=this,this.startRequest(i),a={},a[i.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:a,context:r.currentForm,success:function(e){var n,a,o,u=e===!0||"true"===e;r.settings.messages[i.name][s]=l.originalMessage,u?(o=r.formSubmitted,r.resetInternals(),r.toHide=r.errorsFor(i),r.formSubmitted=o,r.successList.push(i),r.invalid[i.name]=!1,r.showErrors()):(n={},a=e||r.defaultMessage(i,{method:s,parameters:t}),n[i.name]=l.message=a,r.invalid[i.name]=!0,r.showErrors(n)),l.valid=u,r.stopRequest(i,u)}},n)),"pending")}}});var t,i={};return e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,n){var s=e.port;"abort"===e.mode&&(i[s]&&i[s].abort(),i[s]=n)}):(t=e.ajax,e.ajax=function(n){var s=("mode"in n?n:e.ajaxSettings).mode,r=("port"in n?n:e.ajaxSettings).port;return"abort"===s?(i[r]&&i[r].abort(),i[r]=t.apply(this,arguments),i[r]):t.apply(this,arguments)}),e}),function(e){"function"==typeof define&&define.amd?define(["jquery","../jquery.validate"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){return e.extend(e.validator.messages,{required:"Это поле необходимо заполнить.",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корректный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пожалуйста, введите такое же значение ещё раз.",extension:"Пожалуйста, выберите файл с правильным расширением.",maxlength:e.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:e.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:e.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:e.validator.format("Пожалуйста, введите число от {0} до {1}."),max:e.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:e.validator.format("Пожалуйста, введите число, большее или равное {0}.")}),e}),function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.ResizeSensor=t()}("undefined"!=typeof window?window:this,function(){function e(e,t){var i=Object.prototype.toString.call(e),n="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"[object Object]"===i||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,s=0,r=e.length;if(n)for(;s<r;s++)t(e[s]);else t(e)}function t(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var t=e.getBoundingClientRect();return{width:Math.round(t.width),height:Math.round(t.height)}}function i(e,t){Object.keys(t).forEach(function(i){e.style[i]=t[i]})}if("undefined"==typeof window)return null;var n="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),s=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(e){return n.setTimeout(e,20)},r=function(n,a){function o(){var e=[];this.add=function(t){e.push(t)};var t,i;this.call=function(n){for(t=0,i=e.length;t<i;t++)e[t].call(this,n)},this.remove=function(n){var s=[];for(t=0,i=e.length;t<i;t++)e[t]!==n&&s.push(e[t]);e=s},this.length=function(){return e.length}}function l(e,n){if(e){if(e.resizedAttached)return void e.resizedAttached.add(n);e.resizedAttached=new o,e.resizedAttached.add(n),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var r={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},a={position:"absolute",left:"0px",top:"0px",transition:"0s"};i(e.resizeSensor,r);var l=document.createElement("div");l.className="resize-sensor-expand",i(l,r);var u=document.createElement("div");i(u,a),l.appendChild(u);var c=document.createElement("div");c.className="resize-sensor-shrink",i(c,r);var d=document.createElement("div");i(d,a),i(d,{width:"200%",height:"200%"}),c.appendChild(d),e.resizeSensor.appendChild(l),e.resizeSensor.appendChild(c),e.appendChild(e.resizeSensor);var h=window.getComputedStyle(e),f=h?h.getPropertyValue("position"):null;"absolute"!==f&&"relative"!==f&&"fixed"!==f&&(e.style.position="relative");var p,g,m=t(e),v=0,y=0,b=!0,w=0,x=function(){var t=e.offsetWidth,i=e.offsetHeight;u.style.width=t+10+"px",u.style.height=i+10+"px",l.scrollLeft=t+10,l.scrollTop=i+10,c.scrollLeft=t+10,c.scrollTop=i+10},S=function(){if(b){var t=0===e.offsetWidth&&0===e.offsetHeight;if(t)return void(w||(w=s(function(){w=0,S()})));b=!1}x()};e.resizeSensor.resetSensor=S;var C=function(){g=0,p&&(v=m.width,y=m.height,e.resizedAttached&&e.resizedAttached.call(m))},_=function(){m=t(e),p=m.width!==v||m.height!==y,p&&!g&&(g=s(C)),S()},k=function(e,t,i){e.attachEvent?e.attachEvent("on"+t,i):e.addEventListener(t,i)};k(l,"scroll",_),k(c,"scroll",_),s(S)}}e(n,function(e){l(e,a)}),this.detach=function(e){r.detach(n,e)},this.reset=function(){n.resizeSensor.resetSensor()}};if(r.reset=function(t){e(t,function(e){e.resizeSensor.resetSensor()})},r.detach=function(t,i){e(t,function(e){e&&(e.resizedAttached&&"function"==typeof i&&(e.resizedAttached.remove(i),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))})},"undefined"!=typeof MutationObserver){var a=new MutationObserver(function(e){for(var t in e)if(e.hasOwnProperty(t))for(var i=e[t].addedNodes,n=0;n<i.length;n++)i[n].resizeSensor&&r.reset(i[n])});document.addEventListener("DOMContentLoaded",function(e){a.observe(document.body,{childList:!0,subtree:!0})})}return r}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var t=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),i=function(){var i=".stickySidebar",n={topSpacing:0,bottomSpacing:0,containerSelector:!1,innerWrapperSelector:".inner-wrapper-sticky",stickyClass:"is-affixed",resizeSensor:!0,minWidth:!1};return function(){function s(t){var i=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,s),this.options=s.extend(n,r),this.sidebar="string"==typeof t?document.querySelector(t):t,void 0===this.sidebar)throw new Error("There is no specific sidebar element.");this.sidebarInner=!1,this.container=this.sidebar.parentElement,this.affixedType="STATIC",this.direction="down",this.support={transform:!1,transform3d:!1},this._initialized=!1,this._reStyle=!1,this._breakpoint=!1,this._resizeListeners=[],this.dimensions={translateY:0,topSpacing:0,lastTopSpacing:0,bottomSpacing:0,lastBottomSpacing:0,sidebarHeight:0,sidebarWidth:0,containerTop:0,containerHeight:0,viewportHeight:0,viewportTop:0,lastViewportTop:0},["handleEvent"].forEach(function(e){i[e]=i[e].bind(i)}),this.initialize()}return t(s,[{key:"initialize",value:function(){var e=this;if(this._setSupportFeatures(),this.options.innerWrapperSelector&&(this.sidebarInner=this.sidebar.querySelector(this.options.innerWrapperSelector),null===this.sidebarInner&&(this.sidebarInner=!1)),!this.sidebarInner){var t=document.createElement("div");for(t.setAttribute("class","inner-wrapper-sticky"),this.sidebar.appendChild(t);this.sidebar.firstChild!=t;)t.appendChild(this.sidebar.firstChild);this.sidebarInner=this.sidebar.querySelector(".inner-wrapper-sticky")}if(this.options.containerSelector){var i=document.querySelectorAll(this.options.containerSelector);if((i=Array.prototype.slice.call(i)).forEach(function(t,i){t.contains(e.sidebar)&&(e.container=t)}),!i.length)throw new Error("The container does not contains on the sidebar.")}"function"!=typeof this.options.topSpacing&&(this.options.topSpacing=parseInt(this.options.topSpacing)||0),"function"!=typeof this.options.bottomSpacing&&(this.options.bottomSpacing=parseInt(this.options.bottomSpacing)||0),this._widthBreakpoint(),this.calcDimensions(),this.stickyPosition(),this.bindEvents(),this._initialized=!0}},{key:"bindEvents",value:function(){window.addEventListener("resize",this,{passive:!0,capture:!1}),window.addEventListener("scroll",this,{passive:!0,capture:!1}),this.sidebar.addEventListener("update"+i,this),this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(new ResizeSensor(this.sidebarInner,this.handleEvent),new ResizeSensor(this.container,this.handleEvent))}},{key:"handleEvent",value:function(e){this.updateSticky(e)}},{key:"calcDimensions",value:function(){if(!this._breakpoint){var e=this.dimensions;e.containerTop=s.offsetRelative(this.container).top,e.containerHeight=this.container.clientHeight,e.containerBottom=e.containerTop+e.containerHeight,e.sidebarHeight=this.sidebarInner.offsetHeight,e.sidebarWidth=this.sidebar.offsetWidth,e.viewportHeight=window.innerHeight,this._calcDimensionsWithScroll()}}},{key:"_calcDimensionsWithScroll",value:function(){var e=this.dimensions;e.sidebarLeft=s.offsetRelative(this.sidebar).left,e.viewportTop=document.documentElement.scrollTop||document.body.scrollTop,e.viewportBottom=e.viewportTop+e.viewportHeight,e.viewportLeft=document.documentElement.scrollLeft||document.body.scrollLeft,e.topSpacing=this.options.topSpacing,e.bottomSpacing=this.options.bottomSpacing,"function"==typeof e.topSpacing&&(e.topSpacing=parseInt(e.topSpacing(this.sidebar))||0),"function"==typeof e.bottomSpacing&&(e.bottomSpacing=parseInt(e.bottomSpacing(this.sidebar))||0),"VIEWPORT-TOP"===this.affixedType?e.topSpacing<e.lastTopSpacing&&(e.translateY+=e.lastTopSpacing-e.topSpacing,this._reStyle=!0):"VIEWPORT-BOTTOM"===this.affixedType&&e.bottomSpacing<e.lastBottomSpacing&&(e.translateY+=e.lastBottomSpacing-e.bottomSpacing,this._reStyle=!0),e.lastTopSpacing=e.topSpacing,e.lastBottomSpacing=e.bottomSpacing}},{key:"isSidebarFitsViewport",value:function(){return this.dimensions.sidebarHeight<this.dimensions.viewportHeight}},{key:"observeScrollDir",value:function(){var e=this.dimensions;if(e.lastViewportTop!==e.viewportTop){var t="down"===this.direction?Math.min:Math.max;e.viewportTop===t(e.viewportTop,e.lastViewportTop)&&(this.direction="down"===this.direction?"up":"down")}}},{key:"getAffixType",value:function(){var e=this.dimensions,t=!1;this._calcDimensionsWithScroll();var i=e.sidebarHeight+e.containerTop,n=e.viewportTop+e.topSpacing,s=e.viewportBottom-e.bottomSpacing;return"up"===this.direction?n<=e.containerTop?(e.translateY=0,t="STATIC"):n<=e.translateY+e.containerTop?(e.translateY=n-e.containerTop,t="VIEWPORT-TOP"):!this.isSidebarFitsViewport()&&e.containerTop<=n&&(t="VIEWPORT-UNBOTTOM"):this.isSidebarFitsViewport()?e.sidebarHeight+n>=e.containerBottom?(e.translateY=e.containerBottom-i,t="CONTAINER-BOTTOM"):n>=e.containerTop&&(e.translateY=n-e.containerTop,t="VIEWPORT-TOP"):e.containerBottom<=s?(e.translateY=e.containerBottom-i,t="CONTAINER-BOTTOM"):i+e.translateY<=s?(e.translateY=s-i,t="VIEWPORT-BOTTOM"):e.containerTop+e.translateY<=n&&(t="VIEWPORT-UNBOTTOM"),e.translateY=Math.max(0,e.translateY),e.translateY=Math.min(e.containerHeight,e.translateY),e.lastViewportTop=e.viewportTop,t}},{key:"_getStyle",value:function(e){if(void 0!==e){var t={inner:{},outer:{}},i=this.dimensions;switch(e){case"VIEWPORT-TOP":t.inner={position:"fixed",top:i.topSpacing,left:i.sidebarLeft-i.viewportLeft,width:i.sidebarWidth};break;case"VIEWPORT-BOTTOM":t.inner={position:"fixed",top:"auto",left:i.sidebarLeft,bottom:i.bottomSpacing,width:i.sidebarWidth};break;case"CONTAINER-BOTTOM":case"VIEWPORT-UNBOTTOM":var n=this._getTranslate(0,i.translateY+"px");t.inner=n?{transform:n}:{position:"absolute",top:i.translateY,width:i.sidebarWidth}}switch(e){case"VIEWPORT-TOP":case"VIEWPORT-BOTTOM":case"VIEWPORT-UNBOTTOM":case"CONTAINER-BOTTOM":t.outer={height:i.sidebarHeight,position:"relative"}}return t.outer=s.extend({height:"",position:""},t.outer),t.inner=s.extend({position:"relative",top:"",left:"",bottom:"",width:"",transform:this._getTranslate()},t.inner),t}}},{key:"stickyPosition",value:function(e){if(!this._breakpoint){e=this._reStyle||e||!1;var t=this.getAffixType(),n=this._getStyle(t);if((this.affixedType!=t||e)&&t){var r="affix."+t.toLowerCase().replace("viewport-","")+i;s.eventTrigger(this.sidebar,r),"STATIC"===t?s.removeClass(this.sidebar,this.options.stickyClass):s.addClass(this.sidebar,this.options.stickyClass);for(var a in n.outer)this.sidebar.style[a]=n.outer[a];for(var o in n.inner){var l="number"==typeof n.inner[o]?"px":"";this.sidebarInner.style[o]=n.inner[o]+l}var u="affixed."+t.toLowerCase().replace("viewport-","")+i;s.eventTrigger(this.sidebar,u)}else this._initialized&&(this.sidebarInner.style.left=n.inner.left);this.affixedType=t}}},{key:"_widthBreakpoint",value:function(){window.innerWidth<=this.options.minWidth?(this._breakpoint=!0,this.affixedType="STATIC",this.sidebar.removeAttribute("style"),s.removeClass(this.sidebar,this.options.stickyClass),this.sidebarInner.removeAttribute("style")):this._breakpoint=!1}},{key:"updateSticky",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._running||(this._running=!0,function(t){requestAnimationFrame(function(){switch(t){case"scroll":e._calcDimensionsWithScroll(),e.observeScrollDir(),e.stickyPosition();break;case"resize":default:e._widthBreakpoint(),e.calcDimensions(),e.stickyPosition(!0)}e._running=!1})}(t.type))}},{key:"_setSupportFeatures",value:function(){var e=this.support;e.transform=s.supportTransform(),e.transform3d=s.supportTransform(!0)}},{key:"_getTranslate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.support.transform3d?"translate3d("+e+", "+t+", "+i+")":!!this.support.translate&&"translate("+e+", "+t+")"}},{key:"destroy",value:function(){window.removeEventListener("resize",this,{caption:!1}),window.removeEventListener("scroll",this,{caption:!1}),this.sidebar.classList.remove(this.options.stickyClass),this.sidebar.style.minHeight="",this.sidebar.removeEventListener("update"+i,this);var e={inner:{},outer:{}};e.inner={position:"",top:"",left:"",bottom:"",width:"",transform:""},e.outer={height:"",position:""};for(var t in e.outer)this.sidebar.style[t]=e.outer[t];for(var n in e.inner)this.sidebarInner.style[n]=e.inner[n];this.options.resizeSensor&&"undefined"!=typeof ResizeSensor&&(ResizeSensor.detach(this.sidebarInner,this.handleEvent),ResizeSensor.detach(this.container,this.handleEvent))}}],[{key:"supportTransform",value:function(e){var t=!1,i=e?"perspective":"transform",n=i.charAt(0).toUpperCase()+i.slice(1),s=["Webkit","Moz","O","ms"],r=document.createElement("support").style;return(i+" "+s.join(n+" ")+n).split(" ").forEach(function(e,i){if(void 0!==r[e])return t=e,!1}),t}},{key:"eventTrigger",value:function(e,t,i){try{var n=new CustomEvent(t,{detail:i})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i)}e.dispatchEvent(n)}},{key:"extend",value:function(e,t){var i={};for(var n in e)void 0!==t[n]?i[n]=t[n]:i[n]=e[n];return i}},{key:"offsetRelative",value:function(e){var t={left:0,top:0};do{var i=e.offsetTop,n=e.offsetLeft;isNaN(i)||(t.top+=i),isNaN(n)||(t.left+=n),e="BODY"===e.tagName?e.parentElement:e.offsetParent}while(e);return t}},{key:"addClass",value:function(e,t){s.hasClass(e,t)||(e.classList?e.classList.add(t):e.className+=" "+t)}},{key:"removeClass",value:function(e,t){s.hasClass(e,t)&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}},{key:"hasClass",value:function(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}}]),s}()}();window.StickySidebar=i,function(){if("undefined"!=typeof window){var e=window.$||window.jQuery||window.Zepto;if(e){e.fn.stickySidebar=function(t){return this.each(function(){var n=e(this),s=e(this).data("stickySidebar");if(s||(s=new i(this,"object"==typeof t&&t),n.data("stickySidebar",s)),"string"==typeof t){if(void 0===s[t]&&-1===["destroy","updateSticky"].indexOf(t))throw new Error('No method named "'+t+'"');s[t]()}})},e.fn.stickySidebar.Constructor=i;var t=e.fn.stickySidebar;e.fn.stickySidebar.noConflict=function(){return e.fn.stickySidebar=t,this}}}}()}),function(e,t){"use strict";var i=function(e){this.elem=e};i.init=function(){var e,n=t.querySelectorAll("[data-sharer]"),s=n.length;for(e=0;e<s;e++)n[e].addEventListener("click",i.add)},i.add=function(e){var t=e.currentTarget||e.srcElement,n=new i(t);n.share()},i.prototype={constructor:i,getValue:function(e){var t=this.elem.getAttribute("data-"+e);return t&&"hashtag"===e&&(t.startsWith("#")||(t="#"+t)),t},share:function(){var e=this.getValue("sharer").toLowerCase(),t={facebook:{shareUrl:"https://www.facebook.com/sharer/sharer.php",params:{u:this.getValue("url"),hashtag:this.getValue("hashtag")}},linkedin:{shareUrl:"https://www.linkedin.com/shareArticle",params:{url:this.getValue("url"),mini:!0}},twitter:{shareUrl:"https://twitter.com/intent/tweet/",params:{text:this.getValue("title"),url:this.getValue("url"),hashtags:this.getValue("hashtags"),via:this.getValue("via")}},email:{shareUrl:"mailto:"+this.getValue("to")||"",params:{subject:this.getValue("subject"),body:this.getValue("title")+"\n"+this.getValue("url")},isLink:!0},whatsapp:{shareUrl:null!==this.getValue("web")?"https://api.whatsapp.com/send":"whatsapp://send",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},telegram:{shareUrl:"tg://msg_url",params:{text:this.getValue("title"),url:this.getValue("url"),to:this.getValue("to")},isLink:!0},viber:{shareUrl:"viber://forward",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},line:{shareUrl:"http://line.me/R/msg/text/?"+encodeURIComponent(this.getValue("title")+" "+this.getValue("url")),isLink:!0},pinterest:{shareUrl:"https://www.pinterest.com/pin/create/button/",params:{url:this.getValue("url"),media:this.getValue("image"),description:this.getValue("description")}},tumblr:{shareUrl:"http://tumblr.com/widgets/share/tool",params:{canonicalUrl:this.getValue("url"),content:this.getValue("url"),posttype:"link",title:this.getValue("title"),caption:this.getValue("caption"),tags:this.getValue("tags")}},hackernews:{shareUrl:"https://news.ycombinator.com/submitlink",params:{u:this.getValue("url"),t:this.getValue("title")}},reddit:{shareUrl:"https://www.reddit.com/submit",params:{url:this.getValue("url")}},vk:{shareUrl:"http://vk.com/share.php",params:{url:this.getValue("url"),title:this.getValue("title"),description:this.getValue("caption"),image:this.getValue("image")}},xing:{shareUrl:"https://www.xing.com/app/user",params:{op:"share",url:this.getValue("url"),title:this.getValue("title")}},buffer:{shareUrl:"https://buffer.com/add",params:{url:this.getValue("url"),title:this.getValue("title"),via:this.getValue("via"),picture:this.getValue("picture")}},instapaper:{shareUrl:"http://www.instapaper.com/edit",params:{url:this.getValue("url"),title:this.getValue("title"),description:this.getValue("description")}},pocket:{shareUrl:"https://getpocket.com/save",params:{url:this.getValue("url")}},digg:{shareUrl:"http://www.digg.com/submit",params:{url:this.getValue("url")}},stumbleupon:{shareUrl:"http://www.stumbleupon.com/submit",params:{url:this.getValue("url"),title:this.getValue("title")}},flipboard:{shareUrl:"https://share.flipboard.com/bookmarklet/popout",params:{v:2,title:this.getValue("title"),url:this.getValue("url"),t:Date.now()}},weibo:{shareUrl:"http://service.weibo.com/share/share.php",params:{url:this.getValue("url"),title:this.getValue("title"),pic:this.getValue("image"),appkey:this.getValue("appkey"),ralateUid:this.getValue("ralateuid"),language:"zh_cn"}},renren:{shareUrl:"http://share.renren.com/share/buttonshare",params:{link:this.getValue("url")}},myspace:{shareUrl:"https://myspace.com/post",params:{u:this.getValue("url"),t:this.getValue("title"),c:this.getValue("description")}},blogger:{shareUrl:"https://www.blogger.com/blog-this.g",params:{u:this.getValue("url"),n:this.getValue("title"),t:this.getValue("description")}},baidu:{shareUrl:"http://cang.baidu.com/do/add",params:{it:this.getValue("title"),iu:this.getValue("url")}},douban:{shareUrl:"https://www.douban.com/share/service",params:{name:this.getValue("title"),href:this.getValue("url"),image:this.getValue("image")}},okru:{shareUrl:"https://connect.ok.ru/dk",params:{"st.cmd":"WidgetSharePreview","st.shareUrl":this.getValue("url"),title:this.getValue("title")}},mailru:{shareUrl:"http://connect.mail.ru/share",params:{share_url:this.getValue("url"),linkname:this.getValue("title"),linknote:this.getValue("description"),type:"page"}},evernote:{shareUrl:"http://www.evernote.com/clip.action",params:{url:this.getValue("url"),title:this.getValue("title")}},skype:{shareUrl:"https://web.skype.com/share",params:{url:this.getValue("url"),title:this.getValue("title")}}},i=t[e];return i&&(i.width=this.getValue("width"),i.height=this.getValue("height")),void 0!==i&&this.urlSharer(i)},urlSharer:function(t){var i,n=t.params||{},s=Object.keys(n),r=s.length>0?"?":"";for(i=0;i<s.length;i++)"?"!==r&&(r+="&"),n[s[i]]&&(r+=s[i]+"="+encodeURIComponent(n[s[i]]));if(t.shareUrl+=r,t.isLink)e.location.href=t.shareUrl;else{var a=t.width||600,o=t.height||480,l=e.innerWidth/2-a/2+e.screenX,u=e.innerHeight/2-o/2+e.screenY,c="scrollbars=no, width="+a+", height="+o+", top="+u+", left="+l,d=e.open(t.shareUrl,"",c);e.focus&&d.focus()}}},"complete"===t.readyState||"loading"!==t.readyState?i.init():t.addEventListener("DOMContentLoaded",i.init),e.addEventListener("page:load",i.init),e.Sharer=i}(window,document);